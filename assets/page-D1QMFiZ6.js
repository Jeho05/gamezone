import{u as U,r as i,w as $}from"./react-vendor-BXH1ZKCn.js";import{j as e}from"./ui-vendor-CptTL0WJ.js";import{R as X}from"./layout-CA9ilw8C.js";import{C as r}from"./PolymorphicComponent-CmmJTj6d.js";import{N as D,a as g}from"./Navigation-C_UvFhfu.js";import{t as y}from"./index-DeIfEMOZ.js";import{A as P}from"./apiBase-uKT1-15E.js";import{r as Y}from"./avatarUrl-DJYax4aH.js";import{U as A,S as M}from"./users-uhOgvxGK.js";import{S as O}from"./search-DzFNGWdv.js";import{F}from"./filter-BlspYazV.js";import{E as G}from"./eye-DLEIbPNr.js";import{c as _}from"./createLucideIcon-BCGXG0XW.js";import{P as J}from"./plus-BIa4dSUY.js";import"./gamepad-D9JnDti4.js";import"./sparkles-BFQn3fMP.js";import"./trophy-CUmIdvP5.js";import"./x-BQPNjVqT.js";if(typeof window<"u"){const l={NEXT_PUBLIC_API_BASE:"https://votre-domaine.infinityfreeapp.com/api",NEXT_PUBLIC_KKIAPAY_PUBLIC_KEY:"072b361d25546db0aee3d69bf07b15331c51e39f",NEXT_PUBLIC_KKIAPAY_SANDBOX:"0"};globalThis.process??={};const d=globalThis.process.env??{};globalThis.process.env=new Proxy(Object.assign({},l,d),{get(n,t){return t in n?n[t]:void 0},has(){return!0}})}const R=_("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);if(typeof window<"u"){const l={NEXT_PUBLIC_API_BASE:"https://votre-domaine.infinityfreeapp.com/api",NEXT_PUBLIC_KKIAPAY_PUBLIC_KEY:"072b361d25546db0aee3d69bf07b15331c51e39f",NEXT_PUBLIC_KKIAPAY_SANDBOX:"0"};globalThis.process??={};const d=globalThis.process.env??{};globalThis.process.env=new Proxy(Object.assign({},l,d),{get(n,t){return t in n?n[t]:void 0},has(){return!0}})}const z=_("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]);if(typeof window<"u"){const l={NEXT_PUBLIC_API_BASE:"https://votre-domaine.infinityfreeapp.com/api",NEXT_PUBLIC_KKIAPAY_PUBLIC_KEY:"072b361d25546db0aee3d69bf07b15331c51e39f",NEXT_PUBLIC_KKIAPAY_SANDBOX:"0"};globalThis.process??={};const d=globalThis.process.env??{};globalThis.process.env=new Proxy(Object.assign({},l,d),{get(n,t){return t in n?n[t]:void 0},has(){return!0}})}function q(){const l=U(),[d,n]=i.useState(""),[t,h]=i.useState("all"),[C,p]=i.useState(!1),[c,u]=i.useState(null),[x,m]=i.useState(0),[b,j]=i.useState([]),[S,I]=i.useState(!1),[N,w]=i.useState(null),v=i.useCallback(async()=>{try{I(!0),w(null);const s=await fetch(`${P}/users/index.php?limit=100`,{credentials:"include"}),o=await s.json();if(!s.ok)throw new Error(o?.error||"Échec du chargement des joueurs");const f=(o.items||[]).map(a=>({id:a.id,username:a.username,email:a.email,avatar:Y(a.avatar_url,a.username),points:a.points??0,level:a.level||"Gamer",joinDate:a.join_date||"",lastActive:a.last_active||"",totalSessions:a.totalSessions||0,status:a.status||"active"}));j(f)}catch(s){w(s.message)}finally{I(!1)}},[]);i.useEffect(()=>{v()},[v]);const T=b.filter(s=>{const o=s.username.toLowerCase().includes(d.toLowerCase())||s.email.toLowerCase().includes(d.toLowerCase());return t==="all"?o:o&&s.status===t}),L=(s,o)=>{u(s),p(!0)},E=async()=>{if(c&&x!==0)try{const s=await fetch(`${P}/points/adjust.php`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({user_id:c.id,amount:x,reason:"Ajustement admin",type:"adjustment"})}),o=await s.json();if(!s.ok)throw new Error(o?.error||"Échec de l'ajustement");j(f=>f.map(a=>a.id===c.id?{...a,points:Math.max(0,a.points+x)}:a)),y.success("Points ajustés avec succès",{description:`${x>0?"+":""}${x} points pour ${c.username}`,duration:3e3})}catch(s){y.error("Erreur lors de l'ajustement",{description:s.message})}finally{p(!1),m(0),u(null)}},B=s=>new Date(s).toLocaleDateString("fr-FR"),k=s=>{switch(s){case"Diamond Elite":return"text-cyan-400 bg-cyan-400/20";case"Platinum Pro":return"text-slate-300 bg-slate-300/20";case"Gold Gamer":return"text-yellow-400 bg-yellow-400/20";case"Silver Star":return"text-gray-400 bg-gray-400/20";default:return"text-gray-400 bg-gray-400/20"}},K=s=>s==="active"?"text-green-400 bg-green-400/20 border-green-400/30":"text-red-400 bg-red-400/20 border-red-400/30";return e.jsxs(r,{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900",renderId:"render-77b5fbb3",as:"div",children:[e.jsx(D,{userType:"admin",currentPage:"players"}),e.jsx(r,{className:"lg:pl-64",renderId:"render-20e69b8d",as:"div",children:e.jsxs(r,{className:"p-4 lg:p-8",renderId:"render-276423fa",as:"div",children:[e.jsxs(r,{className:"mb-8",renderId:"render-89ea576a",as:"div",children:[e.jsxs(r,{className:"text-3xl lg:text-4xl font-bold text-white mb-2 flex items-center space-x-3",renderId:"render-cf9bf723",as:"h1",children:[e.jsx(A,{className:"w-10 h-10 text-blue-400"}),e.jsx(r,{renderId:"render-c470b78a",as:"span",children:"Gestion des Joueurs"})]}),e.jsx(r,{className:"text-gray-300",renderId:"render-41cd794c",as:"p",children:"Gérez les comptes et points de vos joueurs"})]}),e.jsx(r,{className:"bg-white/10 backdrop-blur-md border border-white/20 rounded-2xl p-6 mb-8",renderId:"render-931bcc89",as:"div",children:e.jsxs(r,{className:"flex flex-col lg:flex-row gap-4",renderId:"render-ef91acef",as:"div",children:[e.jsxs(r,{className:"flex-1 relative",renderId:"render-044a0f74",as:"div",children:[e.jsx(O,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx(r,{type:"text",placeholder:"Rechercher par pseudo ou email...",value:d,onChange:s=>n(s.target.value),className:"w-full bg-white/10 border border-white/20 rounded-xl pl-10 pr-4 py-3 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-400 focus:border-transparent",renderId:"render-ba8e00a9",as:"input"})]}),e.jsxs(r,{className:"flex space-x-2",renderId:"render-c8aeb7d4",as:"div",children:[e.jsxs(r,{onClick:()=>h("all"),className:`px-4 py-2 rounded-xl font-semibold transition-all duration-200 flex items-center space-x-2 ${t==="all"?"bg-gradient-to-r from-purple-600 to-blue-600 text-white":"bg-white/10 text-gray-300 hover:bg-white/20"}`,renderId:"render-0937f758",as:"button",children:[e.jsx(F,{className:"w-4 h-4"}),e.jsx(r,{renderId:"render-2866ea8b",as:"span",children:"Tous"})]}),e.jsx(r,{onClick:()=>h("active"),className:`px-4 py-2 rounded-xl font-semibold transition-all duration-200 ${t==="active"?"bg-gradient-to-r from-green-600 to-green-500 text-white":"bg-white/10 text-gray-300 hover:bg-white/20"}`,renderId:"render-47637f16",as:"button",children:"Actifs"}),e.jsx(r,{onClick:()=>h("inactive"),className:`px-4 py-2 rounded-xl font-semibold transition-all duration-200 ${t==="inactive"?"bg-gradient-to-r from-red-600 to-red-500 text-white":"bg-white/10 text-gray-300 hover:bg-white/20"}`,renderId:"render-080757fd",as:"button",children:"Inactifs"})]})]})}),e.jsx(r,{className:"bg-white/10 backdrop-blur-md border border-white/20 rounded-2xl overflow-hidden",renderId:"render-6a896555",as:"div",children:e.jsxs(r,{className:"overflow-x-auto",renderId:"render-78f60943",as:"div",children:[N&&e.jsx(r,{className:"p-4 text-red-200 bg-red-500/20 border-b border-red-400/30",renderId:"render-8dc4ff4b",as:"div",children:N}),S&&e.jsx(r,{className:"p-4 text-gray-300",renderId:"render-be2f4f60",as:"div",children:"Chargement..."}),e.jsxs(r,{className:"w-full",renderId:"render-9bbf8975",as:"table",children:[e.jsx(r,{className:"bg-white/5 border-b border-white/10",renderId:"render-2c50cd0f",as:"thead",children:e.jsxs(r,{renderId:"render-6d4267fa",as:"tr",children:[e.jsx(r,{className:"text-left py-4 px-6 text-gray-300 font-semibold",renderId:"render-5bc362b9",as:"th",children:"Joueur"}),e.jsx(r,{className:"text-left py-4 px-6 text-gray-300 font-semibold",renderId:"render-567b7770",as:"th",children:"Points"}),e.jsx(r,{className:"text-left py-4 px-6 text-gray-300 font-semibold",renderId:"render-5760cea4",as:"th",children:"Niveau"}),e.jsx(r,{className:"text-left py-4 px-6 text-gray-300 font-semibold",renderId:"render-f8efab6b",as:"th",children:"Sessions"}),e.jsx(r,{className:"text-left py-4 px-6 text-gray-300 font-semibold",renderId:"render-8626d3bc",as:"th",children:"Statut"}),e.jsx(r,{className:"text-left py-4 px-6 text-gray-300 font-semibold",renderId:"render-88be2888",as:"th",children:"Dernière activité"}),e.jsx(r,{className:"text-center py-4 px-6 text-gray-300 font-semibold",renderId:"render-e007c2dc",as:"th",children:"Actions"})]})}),e.jsx(r,{renderId:"render-640ea01c",as:"tbody",children:T.map(s=>e.jsxs(r,{className:"border-b border-white/5 hover:bg-white/5 transition-colors",renderId:"render-1c2fc914",as:"tr",children:[e.jsx(r,{className:"py-4 px-6",renderId:"render-4477e269",as:"td",children:e.jsxs(r,{className:"flex items-center space-x-3",renderId:"render-a644b905",as:"div",children:[e.jsx(r,{src:s.avatar,alt:s.username,className:"w-10 h-10 rounded-full border-2 border-white/20",renderId:"render-eb305a4a",as:"img"}),e.jsxs(r,{renderId:"render-38940d0b",as:"div",children:[e.jsx(r,{className:"text-white font-semibold",renderId:"render-f4960e9a",as:"p",children:s.username}),e.jsx(r,{className:"text-gray-400 text-sm",renderId:"render-4b586602",as:"p",children:s.email})]})]})}),e.jsx(r,{className:"py-4 px-6",renderId:"render-2205075f",as:"td",children:e.jsxs(r,{className:"flex items-center space-x-2 text-yellow-400",renderId:"render-8e838e15",as:"div",children:[e.jsx(g,{className:"w-4 h-4"}),e.jsx(r,{className:"font-semibold",renderId:"render-911ce144",as:"span",children:s.points.toLocaleString()})]})}),e.jsx(r,{className:"py-4 px-6",renderId:"render-ff63621b",as:"td",children:e.jsx(r,{className:`px-3 py-1 rounded-full text-xs font-semibold border ${k(s.level)}`,renderId:"render-7cda11d8",as:"span",children:s.level})}),e.jsx(r,{className:"py-4 px-6",renderId:"render-d0ee0c60",as:"td",children:e.jsx(r,{className:"text-white font-medium",renderId:"render-19c4793f",as:"span",children:s.totalSessions})}),e.jsx(r,{className:"py-4 px-6",renderId:"render-88963bcb",as:"td",children:e.jsx(r,{className:`px-3 py-1 rounded-full text-xs font-semibold border ${K(s.status)}`,renderId:"render-ba873266",as:"span",children:s.status==="active"?"Actif":"Inactif"})}),e.jsx(r,{className:"py-4 px-6",renderId:"render-360790ac",as:"td",children:e.jsx(r,{className:"text-gray-300",renderId:"render-b425eb1d",as:"span",children:B(s.lastActive)})}),e.jsx(r,{className:"py-4 px-6",renderId:"render-05f0f75b",as:"td",children:e.jsxs(r,{className:"flex items-center justify-center space-x-2",renderId:"render-5b39f74d",as:"div",children:[e.jsx(r,{onClick:()=>l(`/admin/players/${s.id}`),className:"p-2 bg-blue-500/20 hover:bg-blue-500/30 rounded-lg transition-colors",title:"Voir le profil",renderId:"render-44ad9234",as:"button",children:e.jsx(G,{className:"w-4 h-4 text-blue-400"})}),e.jsx(r,{onClick:()=>L(s),className:"p-2 bg-green-500/20 hover:bg-green-500/30 rounded-lg transition-colors",title:"Ajuster les points",renderId:"render-a01b23ca",as:"button",children:e.jsx(g,{className:"w-4 h-4 text-green-400"})}),e.jsx(r,{onClick:()=>l(`/admin/players/${s.id}`),className:"p-2 bg-purple-500/20 hover:bg-purple-500/30 rounded-lg transition-colors",title:"Éditer",renderId:"render-cfda9628",as:"button",children:e.jsx(z,{className:"w-4 h-4 text-purple-400"})})]})})]},s.id))})]})]})}),e.jsxs(r,{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mt-8",renderId:"render-fded7464",as:"div",children:[e.jsxs(r,{className:"bg-white/10 backdrop-blur-md border border-white/20 rounded-2xl p-6 text-center",renderId:"render-95726a74",as:"div",children:[e.jsx(A,{className:"w-8 h-8 text-blue-400 mx-auto mb-3"}),e.jsx(r,{className:"text-white font-bold text-lg",renderId:"render-31cd946d",as:"h3",children:"Total Joueurs"}),e.jsx(r,{className:"text-blue-400 text-2xl font-bold",renderId:"render-e962f0da",as:"p",children:b.length})]}),e.jsxs(r,{className:"bg-white/10 backdrop-blur-md border border-white/20 rounded-2xl p-6 text-center",renderId:"render-5bc91121",as:"div",children:[e.jsx(M,{className:"w-8 h-8 text-green-400 mx-auto mb-3"}),e.jsx(r,{className:"text-white font-bold text-lg",renderId:"render-12482db2",as:"h3",children:"Joueurs Actifs"}),e.jsx(r,{className:"text-green-400 text-2xl font-bold",renderId:"render-9677bd14",as:"p",children:b.filter(s=>s.status==="active").length})]}),e.jsxs(r,{className:"bg-white/10 backdrop-blur-md border border-white/20 rounded-2xl p-6 text-center",renderId:"render-75e5d804",as:"div",children:[e.jsx(g,{className:"w-8 h-8 text-yellow-400 mx-auto mb-3"}),e.jsx(r,{className:"text-white font-bold text-lg",renderId:"render-b6f93b50",as:"h3",children:"Points Totaux"}),e.jsx(r,{className:"text-yellow-400 text-2xl font-bold",renderId:"render-b03af0e2",as:"p",children:b.reduce((s,o)=>s+o.points,0).toLocaleString()})]})]})]})}),C&&c&&e.jsx(r,{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",renderId:"render-c110d21a",as:"div",children:e.jsxs(r,{className:"bg-white/10 backdrop-blur-md border border-white/20 rounded-2xl p-8 max-w-md w-full",renderId:"render-bd29b445",as:"div",children:[e.jsxs(r,{className:"text-2xl font-bold text-white mb-4",renderId:"render-467ca292",as:"h3",children:["Ajuster les points de ",c.username]}),e.jsxs(r,{className:"mb-6",renderId:"render-56f9b4a5",as:"div",children:[e.jsxs(r,{className:"text-gray-300 mb-2",renderId:"render-83f85278",as:"p",children:["Points actuels:",e.jsx(r,{className:"text-yellow-400 font-semibold ml-2",renderId:"render-c1d9acfb",as:"span",children:c.points.toLocaleString()})]}),e.jsxs(r,{className:"flex items-center space-x-4 mb-4",renderId:"render-c90c0208",as:"div",children:[e.jsx(r,{onClick:()=>m(s=>s-10),className:"p-2 bg-red-500/20 hover:bg-red-500/30 rounded-lg transition-colors",renderId:"render-421c7bd0",as:"button",children:e.jsx(R,{className:"w-4 h-4 text-red-400"})}),e.jsx(r,{type:"number",value:x,onChange:s=>m(parseInt(s.target.value)||0),className:"flex-1 bg-white/10 border border-white/20 rounded-xl px-4 py-2 text-white text-center focus:outline-none focus:ring-2 focus:ring-purple-400",placeholder:"0",renderId:"render-85d0fe27",as:"input"}),e.jsx(r,{onClick:()=>m(s=>s+10),className:"p-2 bg-green-500/20 hover:bg-green-500/30 rounded-lg transition-colors",renderId:"render-03adf668",as:"button",children:e.jsx(J,{className:"w-4 h-4 text-green-400"})})]}),e.jsxs(r,{className:"text-gray-300 text-sm",renderId:"render-40e2a577",as:"p",children:["Nouveaux points:",e.jsx(r,{className:`font-semibold ml-2 ${c.points+x>=0?"text-green-400":"text-red-400"}`,renderId:"render-3c8bdc76",as:"span",children:Math.max(0,c.points+x).toLocaleString()})]})]}),e.jsxs(r,{className:"flex space-x-4",renderId:"render-c52eea1e",as:"div",children:[e.jsx(r,{onClick:()=>{p(!1),m(0),u(null)},className:"flex-1 bg-gray-600 hover:bg-gray-700 text-white py-3 rounded-xl font-semibold transition-colors",renderId:"render-94dd4940",as:"button",children:"Annuler"}),e.jsx(r,{onClick:E,disabled:x===0,className:"flex-1 bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 disabled:from-gray-600 disabled:to-gray-700 text-white py-3 rounded-xl font-semibold transition-colors disabled:cursor-not-allowed",renderId:"render-29d77912",as:"button",children:"Appliquer"})]})]})})]})}if(typeof window<"u"){const l={NEXT_PUBLIC_API_BASE:"https://votre-domaine.infinityfreeapp.com/api",NEXT_PUBLIC_KKIAPAY_PUBLIC_KEY:"072b361d25546db0aee3d69bf07b15331c51e39f",NEXT_PUBLIC_KKIAPAY_SANDBOX:"0"};globalThis.process??={};const d=globalThis.process.env??{};globalThis.process.env=new Proxy(Object.assign({},l,d),{get(n,t){return t in n?n[t]:void 0},has(){return!0}})}const be=$(function(d){return e.jsx(X,{children:e.jsx(q,{...d})})});export{be as default};
