import{u as k,r as m,i as U}from"./react-vendor-DYp0RFF0.js";import{j as e}from"./ui-vendor-DAbCkwHz.js";import{R as K}from"./layout-BhjoAR2P.js";import{C as r}from"./PolymorphicComponent-kLkD8TKY.js";import{N as X,A as D,C as O,L as Y}from"./Navigation-KwyceX57.js";import{A as x}from"./apiBase-uKT1-15E.js";import{r as $}from"./avatarUrl-DJYax4aH.js";import{L as g}from"./loader-Cr32-Mw4.js";import{C as F}from"./circle-x-3yZKVann.js";import{C as M}from"./circle-check-big-cyHuzEaZ.js";import{U as C}from"./user-hAPui2cl.js";import{C as q}from"./camera-DYh6bjNE.js";import{S as z}from"./shield-CgYTGvXu.js";import{A as E}from"./award-qswWceOe.js";import{T as R}from"./trending-up-DojpjbOr.js";import{M as V}from"./mail-AusrS9BI.js";import{c as T}from"./createLucideIcon-BuqtEc0O.js";import"./index-Birp5Yjg.js";import"./gamepad-DUfdRHsM.js";import"./users-CFhMAaaJ.js";import"./star-COodYRQY.js";import"./sparkles-CYj8vm4n.js";import"./trophy-i2KwZb7z.js";import"./x-B8NaV6qa.js";if(typeof window<"u"){const i={NEXT_PUBLIC_API_BASE:"https://votre-domaine.infinityfreeapp.com/api",NEXT_PUBLIC_KKIAPAY_PUBLIC_KEY:"072b361d25546db0aee3d69bf07b15331c51e39f",NEXT_PUBLIC_KKIAPAY_SANDBOX:"0"};globalThis.process??={};const s=globalThis.process.env??{};globalThis.process.env=new Proxy(Object.assign({},i,s),{get(t,o){return o in t?t[o]:void 0},has(){return!0}})}const w=T("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]);if(typeof window<"u"){const i={NEXT_PUBLIC_API_BASE:"https://votre-domaine.infinityfreeapp.com/api",NEXT_PUBLIC_KKIAPAY_PUBLIC_KEY:"072b361d25546db0aee3d69bf07b15331c51e39f",NEXT_PUBLIC_KKIAPAY_SANDBOX:"0"};globalThis.process??={};const s=globalThis.process.env??{};globalThis.process.env=new Proxy(Object.assign({},i,s),{get(t,o){return o in t?t[o]:void 0},has(){return!0}})}const J=T("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);if(typeof window<"u"){const i={NEXT_PUBLIC_API_BASE:"https://votre-domaine.infinityfreeapp.com/api",NEXT_PUBLIC_KKIAPAY_PUBLIC_KEY:"072b361d25546db0aee3d69bf07b15331c51e39f",NEXT_PUBLIC_KKIAPAY_SANDBOX:"0"};globalThis.process??={};const s=globalThis.process.env??{};globalThis.process.env=new Proxy(Object.assign({},i,s),{get(t,o){return o in t?t[o]:void 0},has(){return!0}})}function W(){const i=k(),[s,t]=m.useState(null),[o,j]=m.useState(!0),[v,N]=m.useState(!1),[I,c]=m.useState(null),[y,f]=m.useState(null),[_,P]=m.useState(!1),[n,u]=m.useState({username:"",email:"",current_password:"",new_password:"",confirm_password:""}),A=m.useRef(null);m.useEffect(()=>{(async()=>{try{j(!0),c(null);const a=await fetch(`${x}/users/profile.php`,{credentials:"include"}),l=await a.json();if(a.status===401){i("/auth/login");return}if(!a.ok)throw new Error(l.error||"Erreur lors du chargement du profil");t(l.user),u({username:l.user.username,email:l.user.email,current_password:"",new_password:"",confirm_password:""})}catch(a){c(a.message)}finally{j(!1)}})()},[]);const L=async()=>{try{await fetch(`${x}/auth/logout.php`,{method:"POST",credentials:"include"})}catch{}finally{i("/auth/login")}},S=async d=>{if(d.preventDefault(),c(null),f(null),n.username.trim().length<3||n.username.trim().length>50){c("Le nom d'utilisateur doit contenir entre 3 et 50 caractÃ¨res");return}if(!/^[A-Za-z0-9_.-]+$/.test(n.username.trim())){c("Le nom d'utilisateur ne doit contenir que des lettres, chiffres, '.', '_' ou '-'");return}if(n.new_password&&n.new_password!==n.confirm_password){c("Les mots de passe ne correspondent pas");return}if(n.new_password&&!n.current_password){c("Le mot de passe actuel est requis pour changer de mot de passe");return}try{N(!0);const l={username:n.username,email:n.email};n.new_password&&(l.current_password=n.current_password,l.new_password=n.new_password);const p=await fetch(`${x}/users/profile.php`,{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(l)}),h=await p.json();if(p.status===401){i("/auth/login");return}if(!p.ok)throw new Error(h.error||"Erreur lors de la mise Ã  jour");t(h.user),f("Profil mis Ã  jour avec succÃ¨s!"),u(b=>({...b,current_password:"",new_password:"",confirm_password:""})),setTimeout(()=>f(null),5e3)}catch(l){c(l.message)}finally{N(!1)}},B=async d=>{const a=d.target.files?.[0];if(a){if(!a.type.startsWith("image/")){c("Veuillez sÃ©lectionner une image");return}if(a.size>5*1024*1024){c("L'image est trop volumineuse (max 5MB)");return}try{P(!0),c(null);const l=new FormData;l.append("avatar",a);const p=await fetch(`${x}/users/avatar.php`,{method:"POST",credentials:"include",body:l}),h=await p.json();if(p.status===401){i("/auth/login");return}if(!p.ok)throw new Error(h.error||"Erreur lors de l'upload");t(b=>({...b,avatar_url:h.avatar_url})),f("Avatar mis Ã  jour avec succÃ¨s!"),setTimeout(()=>f(null),5e3)}catch(l){c(l.message)}finally{P(!1)}}};return o?e.jsx(r,{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 flex items-center justify-center",renderId:"render-b879ba27",as:"div",children:e.jsx(g,{className:"w-12 h-12 text-purple-400 animate-spin"})}):e.jsxs(r,{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900",renderId:"render-4df2dfd3",as:"div",children:[e.jsx(X,{userType:"player",currentPage:"profile"}),e.jsx(r,{className:"lg:pl-64",renderId:"render-6d6e8e6e",as:"div",children:e.jsxs(r,{className:"p-4 lg:p-8",renderId:"render-e013912a",as:"div",children:[e.jsxs(r,{className:"mb-8",renderId:"render-22b06db9",as:"div",children:[e.jsx(r,{className:"text-3xl lg:text-4xl font-bold text-white mb-2",renderId:"render-d70e0331",as:"h1",children:"Mon Profil ðŸ‘¤"}),e.jsx(r,{className:"text-gray-300",renderId:"render-e2662849",as:"p",children:"GÃ©rez vos informations personnelles et vos paramÃ¨tres"})]}),I&&e.jsxs(r,{className:"mb-6 p-4 bg-red-500/20 border border-red-400/40 rounded-lg flex items-center space-x-3",renderId:"render-41a0e2df",as:"div",children:[e.jsx(F,{className:"w-5 h-5 text-red-400 flex-shrink-0"}),e.jsx(r,{className:"text-red-200",renderId:"render-b5079843",as:"p",children:I})]}),y&&e.jsxs(r,{className:"mb-6 p-4 bg-green-500/20 border border-green-400/40 rounded-lg flex items-center space-x-3",renderId:"render-e320e3c9",as:"div",children:[e.jsx(M,{className:"w-5 h-5 text-green-400 flex-shrink-0"}),e.jsx(r,{className:"text-green-200",renderId:"render-4a1177ec",as:"p",children:y})]}),e.jsxs(r,{className:"grid lg:grid-cols-3 gap-8",renderId:"render-d4fe5334",as:"div",children:[e.jsx(r,{className:"lg:col-span-1",renderId:"render-87d4e3a5",as:"div",children:e.jsx(r,{className:"bg-white/10 backdrop-blur-md border border-white/20 rounded-2xl p-6",renderId:"render-9c96dac3",as:"div",children:e.jsxs(r,{className:"text-center",renderId:"render-02226d22",as:"div",children:[e.jsxs(r,{className:"relative inline-block mb-4",renderId:"render-cf4ce873",as:"div",children:[e.jsx(r,{className:"w-32 h-32 rounded-full overflow-hidden border-4 border-purple-500/50 bg-gradient-to-br from-purple-500 to-blue-500",renderId:"render-520406f6",as:"div",children:s?.avatar_url?e.jsx(r,{src:$(s.avatar_url,s.username),alt:s.username,className:"w-full h-full object-cover",renderId:"render-696db57d",as:"img"}):e.jsx(r,{className:"w-full h-full flex items-center justify-center",renderId:"render-72511889",as:"div",children:e.jsx(C,{className:"w-16 h-16 text-white"})})}),e.jsx(r,{onClick:()=>A.current?.click(),disabled:_,className:"absolute bottom-0 right-0 p-2 bg-purple-600 hover:bg-purple-700 rounded-full border-2 border-white transition-colors disabled:opacity-50",renderId:"render-c3c063ea",as:"button",children:_?e.jsx(g,{className:"w-4 h-4 text-white animate-spin"}):e.jsx(q,{className:"w-4 h-4 text-white"})}),e.jsx(r,{ref:A,type:"file",accept:"image/*",onChange:B,className:"hidden",renderId:"render-05a921c8",as:"input"})]}),e.jsx(r,{className:"text-2xl font-bold text-white mb-1",renderId:"render-a80722af",as:"h2",children:s?.username}),e.jsx(r,{className:"text-gray-300 text-sm mb-4",renderId:"render-b65bbbd7",as:"p",children:s?.email}),e.jsx(r,{className:"inline-flex items-center space-x-2 px-4 py-2 bg-purple-500/20 rounded-full border border-purple-400/30",renderId:"render-d33b0550",as:"div",children:s?.role==="admin"?e.jsxs(e.Fragment,{children:[e.jsx(z,{className:"w-4 h-4 text-purple-400"}),e.jsx(r,{className:"text-purple-300 font-semibold",renderId:"render-4338c111",as:"span",children:"Administrateur"})]}):e.jsxs(e.Fragment,{children:[e.jsx(E,{className:"w-4 h-4 text-purple-400"}),e.jsx(r,{className:"text-purple-300 font-semibold",renderId:"render-3758d3d2",as:"span",children:"Joueur"})]})}),e.jsxs(r,{className:"mt-6 space-y-4",renderId:"render-294251cf",as:"div",children:[e.jsxs(r,{className:"flex justify-between items-center p-3 bg-white/5 rounded-lg",renderId:"render-11683e90",as:"div",children:[e.jsxs(r,{className:"flex items-center space-x-2",renderId:"render-6dcd63bd",as:"div",children:[e.jsx(E,{className:"w-5 h-5 text-yellow-400"}),e.jsx(r,{className:"text-gray-300",renderId:"render-aeb12f36",as:"span",children:"Points"})]}),e.jsx(r,{className:"text-white font-bold",renderId:"render-205f65f1",as:"span",children:s?.points?.toLocaleString()})]}),e.jsxs(r,{className:"flex justify-between items-center p-3 bg-white/5 rounded-lg",renderId:"render-eb61b8a2",as:"div",children:[e.jsxs(r,{className:"flex items-center space-x-2",renderId:"render-e49776a8",as:"div",children:[e.jsx(R,{className:"w-5 h-5 text-green-400"}),e.jsx(r,{className:"text-gray-300",renderId:"render-65df0b6b",as:"span",children:"Niveau"})]}),e.jsx(r,{className:"text-white font-bold",renderId:"render-b03ce37d",as:"span",children:s?.level||"DÃ©butant"})]}),s?.stats&&e.jsxs(e.Fragment,{children:[e.jsxs(r,{className:"flex justify-between items-center p-3 bg-white/5 rounded-lg",renderId:"render-2337774e",as:"div",children:[e.jsxs(r,{className:"flex items-center space-x-2",renderId:"render-082fdf32",as:"div",children:[e.jsx(D,{className:"w-5 h-5 text-blue-400"}),e.jsx(r,{className:"text-gray-300",renderId:"render-7a6e6375",as:"span",children:"ActivitÃ©s"})]}),e.jsx(r,{className:"text-white font-bold",renderId:"render-b131349f",as:"span",children:s.stats.total_activities})]}),e.jsxs(r,{className:"flex justify-between items-center p-3 bg-white/5 rounded-lg",renderId:"render-05e0d897",as:"div",children:[e.jsxs(r,{className:"flex items-center space-x-2",renderId:"render-24ed8233",as:"div",children:[e.jsx(O,{className:"w-5 h-5 text-purple-400"}),e.jsx(r,{className:"text-gray-300",renderId:"render-9dd51832",as:"span",children:"Jours actifs"})]}),e.jsx(r,{className:"text-white font-bold",renderId:"render-2663e5c2",as:"span",children:s.stats.active_days})]})]})]}),e.jsx(r,{className:"mt-6 pt-6 border-t border-white/10",renderId:"render-218f01c5",as:"div",children:e.jsxs(r,{className:"text-gray-400 text-sm",renderId:"render-efbe0605",as:"p",children:["Membre depuis le ",new Date(s?.member_since).toLocaleDateString("fr-FR",{day:"numeric",month:"long",year:"numeric"})]})}),e.jsxs(r,{onClick:L,className:"mt-4 inline-flex items-center gap-2 px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg font-semibold transition-colors",renderId:"render-18b17f53",as:"button",children:[e.jsx(Y,{className:"w-4 h-4"}),"Se dÃ©connecter"]})]})})}),e.jsx(r,{className:"lg:col-span-2",renderId:"render-db252977",as:"div",children:e.jsxs(r,{className:"bg-white/10 backdrop-blur-md border border-white/20 rounded-2xl p-6 lg:p-8",renderId:"render-25bbee04",as:"div",children:[e.jsx(r,{className:"text-2xl font-bold text-white mb-6",renderId:"render-c49500ef",as:"h2",children:"Modifier le profil"}),e.jsxs(r,{onSubmit:S,className:"space-y-6",renderId:"render-25f44aed",as:"form",children:[e.jsxs(r,{renderId:"render-17c3db41",as:"div",children:[e.jsx(r,{className:"block text-sm font-medium text-gray-300 mb-2",renderId:"render-6e8cbb82",as:"label",children:"Nom d'utilisateur"}),e.jsxs(r,{className:"relative",renderId:"render-a0c209ec",as:"div",children:[e.jsx(C,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx(r,{type:"text",value:n.username,onChange:d=>u(a=>({...a,username:d.target.value})),className:"w-full pl-10 pr-4 py-3 bg-white/5 border border-white/10 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:border-purple-500 focus:ring-2 focus:ring-purple-500/20 transition-all",placeholder:"Votre nom d'utilisateur",required:!0,renderId:"render-037f3a23",as:"input"})]})]}),e.jsxs(r,{renderId:"render-51415d3b",as:"div",children:[e.jsx(r,{className:"block text-sm font-medium text-gray-300 mb-2",renderId:"render-0daa80c9",as:"label",children:"Email"}),e.jsxs(r,{className:"relative",renderId:"render-97a1a13c",as:"div",children:[e.jsx(V,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx(r,{type:"email",value:n.email,onChange:d=>u(a=>({...a,email:d.target.value})),className:"w-full pl-10 pr-4 py-3 bg-white/5 border border-white/10 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:border-purple-500 focus:ring-2 focus:ring-purple-500/20 transition-all",placeholder:"votre@email.com",required:!0,renderId:"render-bdcc1f3f",as:"input"})]})]}),e.jsxs(r,{className:"relative my-8",renderId:"render-3909af5d",as:"div",children:[e.jsx(r,{className:"absolute inset-0 flex items-center",renderId:"render-b0813c74",as:"div",children:e.jsx(r,{className:"w-full border-t border-white/10",renderId:"render-a3e21dc0",as:"div"})}),e.jsx(r,{className:"relative flex justify-center text-sm",renderId:"render-03707c3b",as:"div",children:e.jsx(r,{className:"px-4 bg-slate-900 text-gray-400",renderId:"render-b6d95f60",as:"span",children:"Changer de mot de passe (optionnel)"})})]}),e.jsxs(r,{renderId:"render-a41e08a5",as:"div",children:[e.jsx(r,{className:"block text-sm font-medium text-gray-300 mb-2",renderId:"render-8cc3e948",as:"label",children:"Mot de passe actuel"}),e.jsxs(r,{className:"relative",renderId:"render-04339823",as:"div",children:[e.jsx(w,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx(r,{type:"password",value:n.current_password,onChange:d=>u(a=>({...a,current_password:d.target.value})),className:"w-full pl-10 pr-4 py-3 bg-white/5 border border-white/10 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:border-purple-500 focus:ring-2 focus:ring-purple-500/20 transition-all",placeholder:"Votre mot de passe actuel",renderId:"render-8d227afe",as:"input"})]})]}),e.jsxs(r,{renderId:"render-4001ee1e",as:"div",children:[e.jsx(r,{className:"block text-sm font-medium text-gray-300 mb-2",renderId:"render-f4c6ab7e",as:"label",children:"Nouveau mot de passe"}),e.jsxs(r,{className:"relative",renderId:"render-0dee76fa",as:"div",children:[e.jsx(w,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx(r,{type:"password",value:n.new_password,onChange:d=>u(a=>({...a,new_password:d.target.value})),className:"w-full pl-10 pr-4 py-3 bg-white/5 border border-white/10 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:border-purple-500 focus:ring-2 focus:ring-purple-500/20 transition-all",placeholder:"Nouveau mot de passe (min. 6 caractÃ¨res)",renderId:"render-e290e56f",as:"input"})]})]}),e.jsxs(r,{renderId:"render-cf025594",as:"div",children:[e.jsx(r,{className:"block text-sm font-medium text-gray-300 mb-2",renderId:"render-8656de31",as:"label",children:"Confirmer le nouveau mot de passe"}),e.jsxs(r,{className:"relative",renderId:"render-66a21eca",as:"div",children:[e.jsx(w,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx(r,{type:"password",value:n.confirm_password,onChange:d=>u(a=>({...a,confirm_password:d.target.value})),className:"w-full pl-10 pr-4 py-3 bg-white/5 border border-white/10 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:border-purple-500 focus:ring-2 focus:ring-purple-500/20 transition-all",placeholder:"Confirmer le nouveau mot de passe",renderId:"render-9baf518b",as:"input"})]})]}),e.jsx(r,{type:"submit",disabled:v,className:"w-full bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white font-semibold py-3 px-6 rounded-lg transition-all duration-200 flex items-center justify-center space-x-2 disabled:opacity-50 disabled:cursor-not-allowed",renderId:"render-823e193d",as:"button",children:v?e.jsxs(e.Fragment,{children:[e.jsx(g,{className:"w-5 h-5 animate-spin"}),e.jsx(r,{renderId:"render-8d8e603c",as:"span",children:"Enregistrement..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(J,{className:"w-5 h-5"}),e.jsx(r,{renderId:"render-0978b3ba",as:"span",children:"Enregistrer les modifications"})]})})]})]})})]})]})})]})}if(typeof window<"u"){const i={NEXT_PUBLIC_API_BASE:"https://votre-domaine.infinityfreeapp.com/api",NEXT_PUBLIC_KKIAPAY_PUBLIC_KEY:"072b361d25546db0aee3d69bf07b15331c51e39f",NEXT_PUBLIC_KKIAPAY_SANDBOX:"0"};globalThis.process??={};const s=globalThis.process.env??{};globalThis.process.env=new Proxy(Object.assign({},i,s),{get(t,o){return o in t?t[o]:void 0},has(){return!0}})}const je=U(function(s){return e.jsx(K,{children:e.jsx(W,{...s})})});export{je as default};
