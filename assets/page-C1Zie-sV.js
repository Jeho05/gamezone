import{u as w,r as x,w as y}from"./react-vendor-BXH1ZKCn.js";import{j as e}from"./ui-vendor-CptTL0WJ.js";import{R as P}from"./layout-CA9ilw8C.js";import{C as r}from"./PolymorphicComponent-CmmJTj6d.js";import{A as p}from"./apiBase-uKT1-15E.js";if(typeof window<"u"){const d={NEXT_PUBLIC_API_BASE:"https://votre-domaine.infinityfreeapp.com/api",NEXT_PUBLIC_KKIAPAY_PUBLIC_KEY:"072b361d25546db0aee3d69bf07b15331c51e39f",NEXT_PUBLIC_KKIAPAY_SANDBOX:"0"};globalThis.process??={};const c=globalThis.process.env??{};globalThis.process.env=new Proxy(Object.assign({},d,c),{get(i,t){return t in i?i[t]:void 0},has(){return!0}})}function E(){const d=w(),[c,i]=x.useState(null),[t,h]=x.useState([]),[f,b]=x.useState(!0),[a,u]=x.useState({total_spent:0,total_earned:0,total_redemptions:0});x.useEffect(()=>{g()},[]);const g=async()=>{try{const n=await(await fetch(`${p}/auth/check.php`,{credentials:"include"})).json();if(!n.authenticated||n.user?.role!=="player"){d("/auth/login");return}i(n.user),I()}catch(s){console.error("Erreur auth:",s),d("/auth/login")}},I=async()=>{try{b(!0);const n=await(await fetch(`${p}/shop/my_purchases.php`,{credentials:"include"})).json();if(n.purchases){const l=n.purchases.filter(o=>o.paid_with_points);h(l);const v=l.reduce((o,m)=>o+(parseInt(m.points_spent)||0),0),_=l.reduce((o,m)=>o+(parseInt(m.points_earned)||0),0);u({total_spent:v,total_earned:_,total_redemptions:l.length})}}catch(s){console.error("Erreur lors du chargement de l'historique:",s)}finally{b(!1)}},j=s=>{const n={completed:{bg:"bg-green-100",text:"text-green-800",label:"‚úÖ Compl√©t√©",icon:"‚úÖ"},pending:{bg:"bg-yellow-100",text:"text-yellow-800",label:"‚è≥ En attente",icon:"‚è≥"},active:{bg:"bg-blue-100",text:"text-blue-800",label:"üéÆ En cours",icon:"üéÆ"},cancelled:{bg:"bg-red-100",text:"text-red-800",label:"‚ùå Annul√©",icon:"‚ùå"}},l=n[s]||n.pending;return e.jsx(r,{className:`${l.bg} ${l.text} px-3 py-1 rounded-full text-sm font-semibold`,renderId:"render-ff7a2f9b",as:"span",children:l.label})},N=s=>new Date(s).toLocaleDateString("fr-FR",{day:"2-digit",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"});return f?e.jsx(r,{className:"min-h-screen bg-gradient-to-br from-purple-900 via-purple-800 to-indigo-900 p-6 flex items-center justify-center",renderId:"render-01b683e6",as:"div",children:e.jsx(r,{className:"text-white text-xl",renderId:"render-bdf77ea6",as:"div",children:"‚è≥ Chargement de l'historique..."})}):e.jsx(r,{className:"min-h-screen bg-gradient-to-br from-purple-900 via-purple-800 to-indigo-900 p-6",renderId:"render-f0135e4e",as:"div",children:e.jsxs(r,{className:"max-w-7xl mx-auto",renderId:"render-de9d63c7",as:"div",children:[e.jsx(r,{className:"mb-8",renderId:"render-7229425e",as:"div",children:e.jsxs(r,{className:"flex items-center justify-between mb-4",renderId:"render-e007cce4",as:"div",children:[e.jsxs(r,{renderId:"render-fe9a869e",as:"div",children:[e.jsxs(r,{className:"text-4xl font-bold text-white mb-2 flex items-center gap-3",renderId:"render-b2c51a73",as:"h1",children:[e.jsx(r,{className:"text-5xl",renderId:"render-6f17bfad",as:"span",children:"üìú"}),"Historique des R√©compenses"]}),e.jsx(r,{className:"text-purple-200 text-lg",renderId:"render-8e65c7c0",as:"p",children:"Retrouvez tous vos √©changes de points"})]}),e.jsxs(r,{className:"flex gap-3",renderId:"render-2ff054b6",as:"div",children:[e.jsx(r,{onClick:()=>d("/player/rewards"),className:"px-6 py-3 bg-purple-600 hover:bg-purple-700 text-white rounded-xl transition-all",renderId:"render-2b2b7feb",as:"button",children:"üéÅ R√©compenses"}),e.jsx(r,{onClick:()=>d(-1),className:"px-6 py-3 bg-white/10 hover:bg-white/20 text-white rounded-xl transition-all",renderId:"render-3b80631e",as:"button",children:"‚Üê Retour"})]})]})}),e.jsxs(r,{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",renderId:"render-67911cb4",as:"div",children:[e.jsxs(r,{className:"bg-white rounded-2xl p-6 shadow-xl",renderId:"render-f7423703",as:"div",children:[e.jsxs(r,{className:"flex items-center justify-between mb-2",renderId:"render-473457e5",as:"div",children:[e.jsx(r,{className:"text-gray-600 font-semibold",renderId:"render-d1ff5a12",as:"h3",children:"Total √âchanges"}),e.jsx(r,{className:"text-3xl",renderId:"render-07dcdecc",as:"div",children:"üéÅ"})]}),e.jsx(r,{className:"text-4xl font-bold text-purple-600",renderId:"render-873c0d39",as:"p",children:a.total_redemptions}),e.jsx(r,{className:"text-gray-500 text-sm mt-1",renderId:"render-fe06d233",as:"p",children:"Packages √©chang√©s"})]}),e.jsxs(r,{className:"bg-white rounded-2xl p-6 shadow-xl",renderId:"render-cbbe8dfb",as:"div",children:[e.jsxs(r,{className:"flex items-center justify-between mb-2",renderId:"render-89c050e7",as:"div",children:[e.jsx(r,{className:"text-gray-600 font-semibold",renderId:"render-7032cb09",as:"h3",children:"Points D√©pens√©s"}),e.jsx(r,{className:"text-3xl",renderId:"render-2b99bc8c",as:"div",children:"üí∏"})]}),e.jsx(r,{className:"text-4xl font-bold text-red-600",renderId:"render-741e6210",as:"p",children:a.total_spent.toLocaleString()}),e.jsx(r,{className:"text-gray-500 text-sm mt-1",renderId:"render-b40add40",as:"p",children:"Points utilis√©s"})]}),e.jsxs(r,{className:"bg-white rounded-2xl p-6 shadow-xl",renderId:"render-581c3fae",as:"div",children:[e.jsxs(r,{className:"flex items-center justify-between mb-2",renderId:"render-f92ec0d7",as:"div",children:[e.jsx(r,{className:"text-gray-600 font-semibold",renderId:"render-e752a600",as:"h3",children:"Points Gagn√©s"}),e.jsx(r,{className:"text-3xl",renderId:"render-8b2fb247",as:"div",children:"‚ú®"})]}),e.jsxs(r,{className:"text-4xl font-bold text-green-600",renderId:"render-0e6146fe",as:"p",children:["+",a.total_earned.toLocaleString()]}),e.jsx(r,{className:"text-gray-500 text-sm mt-1",renderId:"render-0f39e9b4",as:"p",children:"Bonus re√ßus"})]})]}),e.jsx(r,{className:"bg-gradient-to-r from-green-400 to-blue-500 rounded-2xl p-6 shadow-xl mb-8 text-white",renderId:"render-28bef3b0",as:"div",children:e.jsxs(r,{className:"flex items-center justify-between",renderId:"render-54d4a6c6",as:"div",children:[e.jsxs(r,{renderId:"render-90cdefc6",as:"div",children:[e.jsx(r,{className:"text-xl font-bold mb-2",renderId:"render-5892026f",as:"h3",children:"üìä Retour sur Investissement"}),e.jsx(r,{className:"text-3xl font-bold",renderId:"render-b8ad7f0b",as:"p",children:a.total_spent>0?`${Math.round(a.total_earned/a.total_spent*100)}%`:"0%"}),e.jsxs(r,{className:"text-sm opacity-90 mt-1",renderId:"render-d6f32ff9",as:"p",children:["Co√ªt net: ",(a.total_spent-a.total_earned).toLocaleString()," points"]})]}),e.jsx(r,{className:"text-6xl",renderId:"render-4e9ed8a3",as:"div",children:"üí∞"})]})}),t.length===0?e.jsxs(r,{className:"bg-white/10 backdrop-blur rounded-2xl p-12 text-center text-white",renderId:"render-93e2dacd",as:"div",children:[e.jsx(r,{className:"text-6xl mb-4",renderId:"render-4c4e9361",as:"div",children:"üì≠"}),e.jsx(r,{className:"text-2xl font-bold mb-2",renderId:"render-3811f1eb",as:"h3",children:"Aucun √©change pour le moment"}),e.jsx(r,{className:"text-white/70 mb-6",renderId:"render-4e21e076",as:"p",children:"Commencez √† √©changer vos points contre des packages de jeu !"}),e.jsx(r,{onClick:()=>d("/player/rewards"),className:"px-8 py-4 bg-purple-600 hover:bg-purple-700 text-white rounded-xl font-bold transition-all",renderId:"render-3c12cbfd",as:"button",children:"üéÅ Voir les R√©compenses"})]}):e.jsxs(r,{className:"space-y-4",renderId:"render-2eba8743",as:"div",children:[e.jsxs(r,{className:"text-2xl font-bold text-white mb-4",renderId:"render-bf56abfc",as:"h2",children:["üìã Historique (",t.length,")"]}),t.map(s=>e.jsxs(r,{className:"bg-white rounded-2xl p-6 shadow-xl hover:shadow-2xl transition-all",renderId:"render-a672f0ac",as:"div",children:[e.jsxs(r,{className:"flex items-start justify-between mb-4",renderId:"render-688c1360",as:"div",children:[e.jsxs(r,{className:"flex-1",renderId:"render-6b00c4d3",as:"div",children:[e.jsxs(r,{className:"flex items-center gap-3 mb-2",renderId:"render-fa31c4c0",as:"div",children:[e.jsx(r,{className:"text-2xl font-bold text-gray-900",renderId:"render-58b1ec58",as:"h3",children:s.game_name}),j(s.session_status)]}),e.jsx(r,{className:"text-gray-600 text-lg",renderId:"render-b130fd3e",as:"p",children:s.package_name}),e.jsx(r,{className:"text-gray-500 text-sm mt-1",renderId:"render-f78bc61b",as:"p",children:N(s.created_at)})]}),e.jsx(r,{className:"text-right",renderId:"render-7ccfb3cb",as:"div",children:e.jsxs(r,{className:"text-gray-600 text-sm",renderId:"render-6725f4fb",as:"p",children:["Transaction #",s.id]})})]}),e.jsxs(r,{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",renderId:"render-c90fa95d",as:"div",children:[e.jsxs(r,{className:"bg-purple-50 rounded-lg p-3",renderId:"render-c0c9ca88",as:"div",children:[e.jsx(r,{className:"text-purple-600 text-xs font-semibold mb-1",renderId:"render-97a78661",as:"p",children:"‚è±Ô∏è DUR√âE"}),e.jsxs(r,{className:"text-2xl font-bold text-purple-900",renderId:"render-e302a4bd",as:"p",children:[s.duration_minutes,e.jsx(r,{className:"text-sm ml-1",renderId:"render-d9e08873",as:"span",children:"min"})]})]}),e.jsxs(r,{className:"bg-red-50 rounded-lg p-3",renderId:"render-741c9814",as:"div",children:[e.jsx(r,{className:"text-red-600 text-xs font-semibold mb-1",renderId:"render-df323e44",as:"p",children:"üí∏ D√âPENS√â"}),e.jsxs(r,{className:"text-2xl font-bold text-red-900",renderId:"render-dfdc976c",as:"p",children:[s.points_spent||0,e.jsx(r,{className:"text-sm ml-1",renderId:"render-b3390aac",as:"span",children:"pts"})]})]}),e.jsxs(r,{className:"bg-green-50 rounded-lg p-3",renderId:"render-87abe418",as:"div",children:[e.jsx(r,{className:"text-green-600 text-xs font-semibold mb-1",renderId:"render-18ecd127",as:"p",children:"‚ú® GAGN√â"}),e.jsxs(r,{className:"text-2xl font-bold text-green-900",renderId:"render-f32ce627",as:"p",children:["+",s.points_earned||0,e.jsx(r,{className:"text-sm ml-1",renderId:"render-5790b779",as:"span",children:"pts"})]})]}),e.jsxs(r,{className:"bg-blue-50 rounded-lg p-3",renderId:"render-1d504585",as:"div",children:[e.jsx(r,{className:"text-blue-600 text-xs font-semibold mb-1",renderId:"render-4bf2b305",as:"p",children:"üí∞ NET"}),e.jsxs(r,{className:"text-2xl font-bold text-blue-900",renderId:"render-7550dbae",as:"p",children:[(s.points_spent||0)-(s.points_earned||0),e.jsx(r,{className:"text-sm ml-1",renderId:"render-e02714ed",as:"span",children:"pts"})]})]})]}),s.session_status==="pending"&&e.jsx(r,{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4 rounded",renderId:"render-4cb52c97",as:"div",children:e.jsx(r,{className:"text-yellow-800 text-sm font-semibold",renderId:"render-a60daca5",as:"p",children:"‚è≥ Session en attente d'activation"})}),s.session_status==="active"&&e.jsx(r,{className:"bg-blue-50 border-l-4 border-blue-400 p-4 rounded",renderId:"render-ee4264f2",as:"div",children:e.jsx(r,{className:"text-blue-800 text-sm font-semibold",renderId:"render-251927eb",as:"p",children:"üéÆ Session en cours de jeu"})}),s.session_status==="completed"&&e.jsx(r,{className:"bg-green-50 border-l-4 border-green-400 p-4 rounded",renderId:"render-0e6325a2",as:"div",children:e.jsx(r,{className:"text-green-800 text-sm font-semibold",renderId:"render-f849e7f9",as:"p",children:"‚úÖ Session termin√©e - Points bonus cr√©dit√©s !"})})]},s.id))]})]})})}if(typeof window<"u"){const d={NEXT_PUBLIC_API_BASE:"https://votre-domaine.infinityfreeapp.com/api",NEXT_PUBLIC_KKIAPAY_PUBLIC_KEY:"072b361d25546db0aee3d69bf07b15331c51e39f",NEXT_PUBLIC_KKIAPAY_SANDBOX:"0"};globalThis.process??={};const c=globalThis.process.env??{};globalThis.process.env=new Proxy(Object.assign({},d,c),{get(i,t){return t in i?i[t]:void 0},has(){return!0}})}const L=y(function(c){return e.jsx(P,{children:e.jsx(E,{...c})})});export{L as default};
