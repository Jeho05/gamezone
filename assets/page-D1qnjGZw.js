import{r as n,h as D,u as J,w as q}from"./react-vendor-BXH1ZKCn.js";import{j as e}from"./ui-vendor-CptTL0WJ.js";import{R as H}from"./layout-CA9ilw8C.js";import{C as r}from"./PolymorphicComponent-CmmJTj6d.js";import{N as $,C as L}from"./Navigation-C_UvFhfu.js";import{A as E}from"./apiBase-uKT1-15E.js";import{t as d}from"./index-DeIfEMOZ.js";import{A as Z}from"./arrow-left-DgQssQru.js";import{S as B,U as Q}from"./users-uhOgvxGK.js";import{G as ee}from"./gamepad-2-BnShYRR0.js";import{C as X}from"./circle-alert-BXr9mOHk.js";import{C as re}from"./clock-BTYTED3i.js";import{Z as se}from"./zap-BvdYI7Va.js";import{C as R}from"./credit-card-DtlZnA-u.js";import{T as ae}from"./timer-BY6tV2TF.js";import{C as M}from"./circle-check-big-BJ9Fwu26.js";import"./gamepad-D9JnDti4.js";import"./createLucideIcon-BCGXG0XW.js";import"./sparkles-BFQn3fMP.js";import"./trophy-CUmIdvP5.js";import"./x-BQPNjVqT.js";if(typeof window<"u"){const c={NEXT_PUBLIC_API_BASE:"https://votre-domaine.infinityfreeapp.com/api",NEXT_PUBLIC_KKIAPAY_PUBLIC_KEY:"072b361d25546db0aee3d69bf07b15331c51e39f",NEXT_PUBLIC_KKIAPAY_SANDBOX:"0"};globalThis.process??={};const t=globalThis.process.env??{};globalThis.process.env=new Proxy(Object.assign({},c,t),{get(a,o){return o in a?a[o]:void 0},has(){return!0}})}function de({amount:c,apiKey:t,sandbox:a=!0,callback:o,onSuccess:I,onFailed:p,theme:y="",data:P="",name:m="",email:C="",phone:h="",className:K=""}){const[k,g]=n.useState(!1),[S,v]=n.useState(!1),[f,A]=n.useState(!1);n.useEffect(()=>{let l=0;const i=20,x=()=>{typeof window.openKkiapayWidget=="function"?(console.log("✅ KkiaPay script loaded successfully"),v(!0),A(!1)):(l++,l>=i?(console.error("❌ KkiaPay script failed to load after",i,"attempts"),A(!0),v(!1)):(console.warn("⚠️ KkiaPay script not yet loaded, retrying... (attempt",l,"/",i,")"),setTimeout(x,500)))};x()},[]),n.useEffect(()=>{const l=x=>{console.log("✅ KkiaPay Payment Success:",x.detail),g(!1),d.success("✅ Paiement réussi!"),I&&I(x.detail)},i=x=>{console.error("❌ KkiaPay Payment Failed:",x.detail),g(!1),d.error("❌ Paiement échoué"),p&&p(x.detail)};return window.addEventListener("success",l),window.addEventListener("failed",i),()=>{window.removeEventListener("success",l),window.removeEventListener("failed",i)}},[I,p]);const u=n.useCallback(()=>{if(console.log("🔵 Button clicked - handlePayment called"),!window.openKkiapayWidget){console.error("❌ KkiaPay script not loaded"),console.error("window.openKkiapayWidget =",window.openKkiapayWidget),d.error("❌ Erreur: Script KkiaPay non chargé. Rafraîchissez la page (F5)."),p&&p({error:"KkiaPay script not loaded"});return}console.log("🚀 Opening KkiaPay widget with config:",{amount:parseInt(c),apiKey:t?t.substring(0,10)+"...":"MISSING",sandbox:a}),g(!0);try{window.openKkiapayWidget({amount:parseInt(c),api_key:t,sandbox:a,phone:h||"",name:m||"",email:C||"",data:P||"",url:o||window.location.href,theme:y||""}),console.log("✅ openKkiapayWidget called successfully"),setTimeout(()=>g(!1),1e3)}catch(l){console.error("❌ Error opening KkiaPay widget:",l),console.error("Error details:",l.message,l.stack),g(!1),d.error("❌ Erreur lors de l'ouverture du paiement: "+l.message),p&&p(l)}},[c,t,a,o,p,y,P,m,C,h]);return f?e.jsx(r,{className:"w-full bg-red-600 text-white py-3 px-6 rounded-lg text-center",renderId:"render-2a3b7ef6",as:"div",children:e.jsxs(r,{className:"flex flex-col items-center gap-2",renderId:"render-da7bca83",as:"div",children:[e.jsx(r,{className:"text-lg",renderId:"render-d7cba806",as:"span",children:"❌"}),e.jsx(r,{className:"text-sm",renderId:"render-1f253452",as:"span",children:"Erreur de chargement du module de paiement"}),e.jsx(r,{onClick:()=>window.location.reload(),className:"mt-2 text-xs underline hover:no-underline",renderId:"render-b4610956",as:"button",children:"Rafraîchir la page (F5)"})]})}):S?e.jsx(r,{type:"button",onClick:u,disabled:k,className:K||"w-full bg-gradient-to-r from-purple-600 to-indigo-600 text-white py-3 px-6 rounded-lg font-bold hover:from-purple-700 hover:to-indigo-700 transition-all text-center cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed",renderId:"render-56710795",as:"button",children:k?e.jsxs(r,{className:"flex items-center justify-center gap-2",renderId:"render-e478c92e",as:"span",children:[e.jsx(r,{className:"animate-spin rounded-full h-5 w-5 border-t-2 border-b-2 border-white",renderId:"render-f8e005a7",as:"div"}),"Ouverture..."]}):"💳 Payer Maintenant"}):e.jsx(r,{className:"w-full bg-gray-600 text-white py-3 px-6 rounded-lg text-center",renderId:"render-ee3d0878",as:"div",children:e.jsxs(r,{className:"flex items-center justify-center gap-2",renderId:"render-22017e1e",as:"div",children:[e.jsx(r,{className:"animate-spin rounded-full h-5 w-5 border-t-2 border-b-2 border-white",renderId:"render-ba282583",as:"div"}),"Chargement du module de paiement..."]})})}if(typeof window<"u"){const c={NEXT_PUBLIC_API_BASE:"https://votre-domaine.infinityfreeapp.com/api",NEXT_PUBLIC_KKIAPAY_PUBLIC_KEY:"072b361d25546db0aee3d69bf07b15331c51e39f",NEXT_PUBLIC_KKIAPAY_SANDBOX:"0"};globalThis.process??={};const t=globalThis.process.env??{};globalThis.process.env=new Proxy(Object.assign({},c,t),{get(a,o){return o in a?a[o]:void 0},has(){return!0}})}function ne(){const{gameId:c}=D(),t=J(),[a,o]=n.useState(null),[I,p]=n.useState(!0),[y,P]=n.useState([]),[m,C]=n.useState(null),[h,K]=n.useState(null),[k,g]=n.useState(!1),[S,v]=n.useState(!1),[f,A]=n.useState(null),[u,l]=n.useState(!1),[i,x]=n.useState(""),[O,U]=n.useState(!1),[T,N]=n.useState(!1),[w,_]=n.useState(!1);n.useEffect(()=>{z(),Y()},[c]);const z=async()=>{try{p(!0);const b=await(await fetch(`${E}/shop/games.php?id=${c}`,{credentials:"include"})).json();b.game?o(b.game):(d.error("Jeu non trouvé"),t("/player/shop"))}catch(s){console.error(s),d.error("Erreur lors du chargement")}finally{p(!1)}},Y=async()=>{try{const b=await(await fetch(`${E}/shop/payment_methods.php`,{credentials:"include"})).json();b.payment_methods&&P(b.payment_methods)}catch(s){console.error("Erreur chargement méthodes paiement:",s)}},W=s=>{if(!s.can_purchase){d.error("Vous avez atteint la limite d'achats pour ce package");return}C(s),l(!1),x(""),N(!1),_(!1),g(!0)},V=async()=>{if(!i||!m){d.error("Veuillez sélectionner une date et heure");return}try{U(!0),(await(await fetch(`${E}/shop/check_availability.php?game_id=${a.id}&package_id=${m.id}&scheduled_start=${encodeURIComponent(i)}`,{credentials:"include"})).json()).available?(_(!0),N(!0),d.success("✅ Créneau disponible !")):(_(!1),N(!0),d.error("❌ Créneau indisponible. Choisissez une autre date/heure."))}catch(s){console.error(s),d.error("Erreur lors de la vérification")}finally{U(!1)}},G=async()=>{if(!m||!h){d.error("Veuillez sélectionner une méthode de paiement");return}if(u&&!T){d.error("Veuillez vérifier la disponibilité avant de réserver");return}if(u&&!w){d.error("Le créneau sélectionné n'est pas disponible");return}try{v(!0);const s={game_id:a.id,package_id:m.id,payment_method_id:h};u&&i&&(s.scheduled_start=i);const j=await(await fetch(`${E}/shop/create_purchase.php`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)})).json();j.success?(j.reservation?d.success("🎯 Réservation créée avec succès !"):d.success("Achat créé avec succès !"),j.next_step==="complete_payment"&&j.payment_data?A(j.payment_data):(g(!1),setTimeout(()=>{j.reservation?t("/player/my-reservations"):t("/player/my-purchases")},1e3))):d.error(j.error||"Erreur lors de l'achat")}catch(s){console.error(s),d.error("Erreur lors de la création de l'achat")}finally{v(!1)}};return I?e.jsxs(r,{className:"min-h-screen bg-gradient-to-br from-purple-900 via-indigo-900 to-blue-900",renderId:"render-c38ffe77",as:"div",children:[e.jsx($,{userType:"player"}),e.jsx(r,{className:"lg:pl-64 flex items-center justify-center min-h-screen",renderId:"render-43b530f1",as:"div",children:e.jsxs(r,{className:"text-center",renderId:"render-bb537bca",as:"div",children:[e.jsx(r,{className:"inline-block animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-purple-500 mb-4",renderId:"render-55aa8a6f",as:"div"}),e.jsx(r,{className:"text-xl text-white",renderId:"render-62196a4a",as:"p",children:"Chargement..."})]})})]}):a?e.jsx(e.Fragment,{children:e.jsxs(r,{className:"min-h-screen bg-gradient-to-br from-purple-900 via-indigo-900 to-blue-900",renderId:"render-dc0d40ea",as:"div",children:[e.jsx($,{userType:"player"}),e.jsx(r,{className:"lg:pl-64",renderId:"render-3ea7784d",as:"div",children:e.jsxs(r,{className:"container mx-auto px-4 py-8",renderId:"render-71304bc4",as:"div",children:[e.jsxs(r,{onClick:()=>t("/player/shop"),className:"flex items-center gap-2 text-white mb-6 hover:text-purple-300 transition-colors",renderId:"render-69bd1a37",as:"button",children:[e.jsx(Z,{className:"w-5 h-5"}),"Retour à la boutique"]}),e.jsxs(r,{className:"bg-gray-900 rounded-2xl overflow-hidden shadow-2xl mb-8",renderId:"render-b841d19b",as:"div",children:[e.jsxs(r,{className:"relative h-64 md:h-80",renderId:"render-5d35002d",as:"div",children:[e.jsx(r,{src:a.image_url||"https://via.placeholder.com/1200x400",alt:a.name,className:"w-full h-full object-cover",renderId:"render-5ae5df57",as:"img"}),e.jsx(r,{className:"absolute inset-0 bg-gradient-to-t from-gray-900 to-transparent",renderId:"render-36adadd8",as:"div"}),e.jsxs(r,{className:"absolute bottom-6 left-6",renderId:"render-af43d46c",as:"div",children:[e.jsx(r,{className:"text-5xl font-bold text-white mb-2",renderId:"render-44588181",as:"h1",children:a.name}),e.jsxs(r,{className:"flex gap-3 flex-wrap",renderId:"render-919cd41c",as:"div",children:[e.jsx(r,{className:"bg-purple-600 px-4 py-2 rounded-full text-white font-semibold capitalize",renderId:"render-394154e2",as:"span",children:a.category}),a.platform&&e.jsx(r,{className:"bg-blue-600 px-4 py-2 rounded-full text-white font-semibold",renderId:"render-99a8cf48",as:"span",children:a.platform})]})]})]}),e.jsxs(r,{className:"p-6",renderId:"render-460b5642",as:"div",children:[e.jsxs(r,{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",renderId:"render-767d10d7",as:"div",children:[e.jsxs(r,{className:"bg-purple-900/50 p-4 rounded-lg text-center",renderId:"render-9ef806a0",as:"div",children:[e.jsx(B,{className:"w-8 h-8 text-yellow-400 mx-auto mb-2"}),e.jsx(r,{className:"text-2xl font-bold text-white",renderId:"render-382ed124",as:"div",children:a.points_per_hour}),e.jsx(r,{className:"text-sm text-gray-400",renderId:"render-d2ae492a",as:"div",children:"Points/Heure"})]}),e.jsxs(r,{className:"bg-purple-900/50 p-4 rounded-lg text-center",renderId:"render-40fbbaa8",as:"div",children:[e.jsx(Q,{className:"w-8 h-8 text-blue-400 mx-auto mb-2"}),e.jsxs(r,{className:"text-2xl font-bold text-white",renderId:"render-0eae8750",as:"div",children:[a.min_players,"-",a.max_players]}),e.jsx(r,{className:"text-sm text-gray-400",renderId:"render-31b3a256",as:"div",children:"Joueurs"})]}),e.jsxs(r,{className:"bg-purple-900/50 p-4 rounded-lg text-center",renderId:"render-5f4260a1",as:"div",children:[e.jsx(ee,{className:"w-8 h-8 text-green-400 mx-auto mb-2"}),e.jsx(r,{className:"text-2xl font-bold text-white",renderId:"render-69fa8529",as:"div",children:a.platform||"Multi"}),e.jsx(r,{className:"text-sm text-gray-400",renderId:"render-6b329026",as:"div",children:"Plateforme"})]}),e.jsxs(r,{className:"bg-purple-900/50 p-4 rounded-lg text-center",renderId:"render-a740ea2e",as:"div",children:[e.jsx(X,{className:"w-8 h-8 text-orange-400 mx-auto mb-2"}),e.jsx(r,{className:"text-2xl font-bold text-white",renderId:"render-63c97c9c",as:"div",children:a.age_rating||"Tous"}),e.jsx(r,{className:"text-sm text-gray-400",renderId:"render-6adbfe28",as:"div",children:"Âge"})]})]}),a.is_reservable==1&&e.jsx(r,{className:"bg-gradient-to-r from-cyan-600/20 to-blue-600/20 border border-cyan-500 rounded-xl p-4 mb-6",renderId:"render-3a38d32d",as:"div",children:e.jsxs(r,{className:"flex items-center gap-3",renderId:"render-17976739",as:"div",children:[e.jsx(L,{className:"w-6 h-6 text-cyan-400"}),e.jsxs(r,{renderId:"render-22d1301d",as:"div",children:[e.jsxs(r,{className:"text-white font-bold flex items-center gap-2",renderId:"render-d9ada727",as:"h4",children:["Ce jeu est réservable !",parseFloat(a.reservation_fee)>0&&e.jsxs(r,{className:"text-cyan-400 text-sm",renderId:"render-f31c058e",as:"span",children:["+",parseFloat(a.reservation_fee).toFixed(0)," XOF"]})]}),e.jsxs(r,{className:"text-sm text-gray-300",renderId:"render-c90f928b",as:"p",children:["Réservez un créneau à l'avance pour garantir votre session",parseFloat(a.reservation_fee)>0&&" (frais de réservation appliqués)"]})]})]})}),a.description&&e.jsxs(r,{className:"mb-6",renderId:"render-aea0b3d1",as:"div",children:[e.jsx(r,{className:"text-xl font-bold text-white mb-3",renderId:"render-7124efc1",as:"h3",children:"Description"}),e.jsx(r,{className:"text-gray-300 leading-relaxed",renderId:"render-55e772d6",as:"p",children:a.description})]})]})]}),e.jsxs(r,{renderId:"render-25495d80",as:"div",children:[e.jsx(r,{className:"text-3xl font-bold text-white mb-6",renderId:"render-50ae2a7c",as:"h2",children:"Choisissez votre Package"}),a.packages&&a.packages.length>0?e.jsx(r,{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",renderId:"render-41e51fd1",as:"div",children:a.packages.map(s=>e.jsxs(r,{className:`bg-gray-800 rounded-xl p-6 border-2 transition-all hover:scale-105 cursor-pointer relative ${s.is_promotional?"border-yellow-500":"border-transparent hover:border-purple-500"}`,onClick:()=>W(s),renderId:"render-76e001fc",as:"div",children:[s.is_promotional&&s.promotional_label&&e.jsx(r,{className:"absolute -top-3 -right-3 bg-gradient-to-r from-yellow-400 to-orange-500 text-white px-3 py-1 rounded-full font-bold text-sm shadow-lg",renderId:"render-be684f92",as:"div",children:s.promotional_label}),e.jsx(r,{className:"text-2xl font-bold text-white mb-3",renderId:"render-c1e2c9f3",as:"h3",children:s.name}),e.jsxs(r,{className:"flex items-center gap-2 text-gray-400 mb-4",renderId:"render-a39ff3ff",as:"div",children:[e.jsx(re,{className:"w-5 h-5"}),e.jsxs(r,{renderId:"render-de9c89ce",as:"span",children:[s.duration_minutes," minutes"]})]}),e.jsxs(r,{className:"flex items-center justify-between mb-4",renderId:"render-2bf495ab",as:"div",children:[e.jsxs(r,{renderId:"render-a322b558",as:"div",children:[s.original_price&&e.jsxs(r,{className:"text-sm text-gray-500 line-through",renderId:"render-7a1d4db3",as:"div",children:[s.original_price," XOF"]}),e.jsxs(r,{className:"text-4xl font-bold text-green-400",renderId:"render-5eba45b0",as:"div",children:[s.price," ",e.jsx(r,{className:"text-xl",renderId:"render-a8838fe9",as:"span",children:"XOF"})]})]}),e.jsxs(r,{className:"text-right",renderId:"render-d6d27678",as:"div",children:[e.jsxs(r,{className:"text-2xl font-bold text-yellow-400 flex items-center gap-1",renderId:"render-cab62e5f",as:"div",children:[e.jsx(B,{className:"w-6 h-6 fill-current"}),"+",s.points_earned]}),e.jsx(r,{className:"text-sm text-gray-400",renderId:"render-606932ea",as:"div",children:"points"})]})]}),s.bonus_multiplier>1&&e.jsxs(r,{className:"bg-yellow-600/20 border border-yellow-600 rounded-lg px-3 py-2 text-center mb-4",renderId:"render-f5b3f25d",as:"div",children:[e.jsx(se,{className:"w-4 h-4 inline-block mr-1"}),e.jsxs(r,{className:"text-yellow-400 font-bold",renderId:"render-c473aa4b",as:"span",children:["Bonus x",s.bonus_multiplier]})]}),!s.can_purchase&&e.jsx(r,{className:"bg-red-600/20 border border-red-600 rounded-lg px-3 py-2 text-center text-red-400 text-sm",renderId:"render-d1c05d32",as:"div",children:"Limite d'achats atteinte"})]},s.id))}):e.jsx(r,{className:"text-center py-12 bg-gray-800 rounded-xl",renderId:"render-406969c5",as:"div",children:e.jsx(r,{className:"text-xl text-gray-400",renderId:"render-5500a101",as:"p",children:"Aucun package disponible pour ce jeu"})})]})]})}),k&&m&&e.jsx(r,{className:"fixed inset-0 bg-black/75 z-50 flex items-center justify-center p-4",renderId:"render-c8c6dfe0",as:"div",children:e.jsxs(r,{className:"bg-gray-900 rounded-2xl max-w-2xl w-full shadow-2xl max-h-[90vh] flex flex-col",renderId:"render-432d7b84",as:"div",children:[e.jsx(r,{className:"p-6 border-b border-gray-800 flex-shrink-0",renderId:"render-f3c6c080",as:"div",children:e.jsxs(r,{className:"flex items-center justify-between",renderId:"render-ad70d278",as:"div",children:[e.jsxs(r,{className:"text-3xl font-bold text-white flex items-center gap-2",renderId:"render-c78f7a20",as:"h2",children:[e.jsx(R,{className:"w-8 h-8"}),"Paiement"]}),e.jsx(r,{onClick:()=>g(!1),className:"text-gray-400 hover:text-white text-2xl",renderId:"render-3e765cc2",as:"button",children:"✕"})]})}),e.jsxs(r,{className:"overflow-y-auto flex-1 p-8",renderId:"render-9da931cd",as:"div",children:[a.is_reservable==1&&e.jsxs(r,{className:"bg-cyan-900/20 border border-cyan-600 rounded-lg p-4 mb-6",renderId:"render-5e69a59a",as:"div",children:[e.jsxs(r,{className:"flex items-center gap-3 cursor-pointer",renderId:"render-fda25955",as:"label",children:[e.jsx(r,{type:"checkbox",checked:u,onChange:s=>{l(s.target.checked),s.target.checked||(x(""),N(!1),_(!1))},className:"w-5 h-5",renderId:"render-3d12888d",as:"input"}),e.jsxs(r,{className:"flex-1",renderId:"render-6a88458f",as:"div",children:[e.jsxs(r,{className:"flex items-center gap-2",renderId:"render-62493657",as:"div",children:[e.jsx(L,{className:"w-5 h-5 text-cyan-400"}),e.jsx(r,{className:"font-bold text-white",renderId:"render-3255d30a",as:"span",children:"Réserver pour une date précise"})]}),parseFloat(a.reservation_fee)>0&&e.jsxs(r,{className:"text-sm text-gray-400 mt-1",renderId:"render-6bec9ccd",as:"p",children:["Frais de réservation: +",parseFloat(a.reservation_fee).toFixed(0)," XOF"]})]})]}),u&&e.jsxs(r,{className:"mt-4 space-y-3",renderId:"render-2193c839",as:"div",children:[e.jsxs(r,{renderId:"render-bc0dd2a4",as:"div",children:[e.jsx(r,{className:"block text-sm font-bold text-white mb-2",renderId:"render-eafe97c2",as:"label",children:"Date et Heure de début"}),e.jsx(r,{type:"datetime-local",value:i,onChange:s=>{x(s.target.value),N(!1),_(!1)},min:new Date().toISOString().slice(0,16),className:"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-cyan-500",renderId:"render-287e7c76",as:"input"})]}),e.jsx(r,{onClick:V,disabled:!i||O,className:"w-full bg-cyan-600 hover:bg-cyan-700 text-white py-3 rounded-lg font-bold transition disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",renderId:"render-62343566",as:"button",children:O?e.jsxs(e.Fragment,{children:[e.jsx(r,{className:"animate-spin rounded-full h-5 w-5 border-t-2 border-b-2 border-white",renderId:"render-9da6cd3f",as:"div"}),"Vérification..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ae,{className:"w-5 h-5"}),"Vérifier la Disponibilité"]})}),T&&e.jsx(r,{className:`p-3 rounded-lg border ${w?"bg-green-900/30 border-green-600":"bg-red-900/30 border-red-600"}`,renderId:"render-a0ca8f45",as:"div",children:e.jsx(r,{className:`text-sm font-bold flex items-center gap-2 ${w?"text-green-400":"text-red-400"}`,renderId:"render-03211cb9",as:"p",children:w?e.jsxs(e.Fragment,{children:[e.jsx(M,{className:"w-5 h-5"}),"✅ Créneau disponible"]}):e.jsxs(e.Fragment,{children:[e.jsx(X,{className:"w-5 h-5"}),"❌ Créneau indisponible"]})})})]})]}),e.jsxs(r,{className:"bg-purple-900/30 rounded-lg p-6 mb-6",renderId:"render-f745d71c",as:"div",children:[e.jsx(r,{className:"text-xl font-bold text-white mb-4",renderId:"render-27e51c55",as:"h3",children:"Récapitulatif"}),e.jsxs(r,{className:"space-y-2",renderId:"render-4ef2d89f",as:"div",children:[e.jsxs(r,{className:"flex justify-between text-gray-300",renderId:"render-922eba56",as:"div",children:[e.jsx(r,{renderId:"render-91297b02",as:"span",children:"Jeu:"}),e.jsx(r,{className:"font-bold text-white",renderId:"render-91404bcb",as:"span",children:a.name})]}),e.jsxs(r,{className:"flex justify-between text-gray-300",renderId:"render-aff569b8",as:"div",children:[e.jsx(r,{renderId:"render-30af2524",as:"span",children:"Package:"}),e.jsx(r,{className:"font-bold text-white",renderId:"render-08cb3972",as:"span",children:m.name})]}),e.jsxs(r,{className:"flex justify-between text-gray-300",renderId:"render-d94373dd",as:"div",children:[e.jsx(r,{renderId:"render-283f2fab",as:"span",children:"Durée:"}),e.jsxs(r,{className:"font-bold text-white",renderId:"render-31417cb9",as:"span",children:[m.duration_minutes," min"]})]}),u&&i&&e.jsxs(r,{className:"flex justify-between text-cyan-300",renderId:"render-d6dbe43d",as:"div",children:[e.jsxs(r,{className:"flex items-center gap-1",renderId:"render-3135ff5c",as:"span",children:[e.jsx(L,{className:"w-4 h-4"}),"Début prévu:"]}),e.jsx(r,{className:"font-bold text-white",renderId:"render-f0db039b",as:"span",children:new Date(i).toLocaleString("fr-FR",{dateStyle:"short",timeStyle:"short"})})]}),e.jsxs(r,{className:"flex justify-between text-gray-300",renderId:"render-35777423",as:"div",children:[e.jsx(r,{renderId:"render-f327eb29",as:"span",children:"Points à gagner:"}),e.jsxs(r,{className:"font-bold text-yellow-400 flex items-center gap-1",renderId:"render-8484067d",as:"span",children:[e.jsx(B,{className:"w-4 h-4 fill-current"}),"+",m.points_earned]})]}),e.jsx(r,{className:"border-t border-gray-700 pt-2 mt-2",renderId:"render-31000d47",as:"div"}),e.jsxs(r,{className:"flex justify-between text-lg",renderId:"render-6b3e9eb3",as:"div",children:[e.jsx(r,{className:"text-gray-300",renderId:"render-dc3fe92a",as:"span",children:"Prix package:"}),e.jsxs(r,{className:"text-white font-bold",renderId:"render-7e19cd1e",as:"span",children:[m.price," XOF"]})]}),u&&parseFloat(a.reservation_fee)>0&&e.jsxs(r,{className:"flex justify-between text-lg",renderId:"render-bf0d88de",as:"div",children:[e.jsx(r,{className:"text-cyan-300",renderId:"render-1cc9645e",as:"span",children:"Frais de réservation:"}),e.jsxs(r,{className:"text-cyan-400 font-bold",renderId:"render-62c7bd73",as:"span",children:["+",parseFloat(a.reservation_fee).toFixed(0)," XOF"]})]}),e.jsx(r,{className:"border-t border-gray-700 pt-2 mt-2",renderId:"render-432c81bc",as:"div"}),e.jsxs(r,{className:"flex justify-between text-xl",renderId:"render-fe1af80d",as:"div",children:[e.jsx(r,{className:"font-bold text-white",renderId:"render-7ff64df0",as:"span",children:"Total:"}),e.jsxs(r,{className:"font-bold text-green-400",renderId:"render-9e387d15",as:"span",children:[(parseFloat(m.price)+(u?parseFloat(a.reservation_fee||0):0)).toFixed(0)," XOF"]})]})]})]}),e.jsx(r,{className:"text-xl font-bold text-white mb-4",renderId:"render-4c718e3c",as:"h3",children:"Méthode de Paiement"}),e.jsx(r,{className:"space-y-3 mb-6",renderId:"render-da34313f",as:"div",children:y.map(s=>e.jsxs(r,{className:`flex items-center p-4 bg-gray-800 rounded-lg cursor-pointer hover:bg-gray-700 border-2 transition-all ${h===s.id?"border-purple-500":"border-transparent"}`,renderId:"render-61fb5de5",as:"label",children:[e.jsx(r,{type:"radio",name:"payment-method",value:s.id,checked:h===s.id,onChange:b=>K(parseInt(b.target.value)),className:"mr-4 w-5 h-5",renderId:"render-cba36ad7",as:"input"}),e.jsxs(r,{className:"flex-1",renderId:"render-4067f2fe",as:"div",children:[e.jsx(r,{className:"font-bold text-white",renderId:"render-e9b6af4a",as:"div",children:s.name}),e.jsx(r,{className:"text-sm text-gray-400",renderId:"render-df0d3e89",as:"div",children:s.requires_online_payment?"Paiement en ligne":"Paiement sur place"})]})]},s.id))}),h&&y.find(s=>s.id===h)?.instructions&&e.jsxs(r,{className:"bg-blue-900/30 border border-blue-600 rounded-lg p-4 mb-6",renderId:"render-c910495d",as:"div",children:[e.jsxs(r,{className:"font-bold text-white mb-2 flex items-center gap-2",renderId:"render-5c2b419f",as:"h4",children:[e.jsx(X,{className:"w-5 h-5"}),"Instructions"]}),e.jsx(r,{className:"text-sm text-gray-300",renderId:"render-3cfeca0a",as:"p",children:y.find(s=>s.id===h)?.instructions})]}),f&&e.jsxs(r,{className:"bg-green-900/30 border border-green-600 rounded-lg p-4 mb-6",renderId:"render-53f07e5d",as:"div",children:[e.jsxs(r,{className:"font-bold text-white mb-2 flex items-center gap-2",renderId:"render-a92c2dfe",as:"h4",children:[e.jsx(R,{className:"w-5 h-5"}),"Paiement en ligne"]}),e.jsxs(r,{className:"text-sm text-gray-300 space-y-3",renderId:"render-5b92f3b1",as:"div",children:[e.jsxs(r,{className:"flex justify-between",renderId:"render-cce4c34d",as:"div",children:[e.jsx(r,{renderId:"render-c3d56aae",as:"span",children:"Fournisseur"}),e.jsx(r,{className:"font-semibold text-white",renderId:"render-5e62c668",as:"span",children:String(f.provider||"").toUpperCase()})]}),e.jsxs(r,{className:"flex justify-between",renderId:"render-d797c5f9",as:"div",children:[e.jsx(r,{renderId:"render-913a9db6",as:"span",children:"Montant"}),e.jsxs(r,{className:"font-semibold text-white",renderId:"render-24e6c2bc",as:"span",children:[f.amount," ",f.currency]})]}),(()=>{const s=["kkiapay","mtn_momo","orange_money","wave","moov_money"],b=String(f.provider||"").toLowerCase();return s.includes(b)&&e.jsxs(r,{className:"mt-4 flex flex-col items-center gap-3",renderId:"render-1e890f42",as:"div",children:[e.jsx(r,{className:"text-xs text-gray-400 text-center",renderId:"render-8a62e8d6",as:"p",children:"Paiement sécurisé via KkiaPay - Accepte tous les opérateurs Mobile Money"}),e.jsx(de,{amount:f.amount,apiKey:"072b361d25546db0aee3d69bf07b15331c51e39f",sandbox:!1,callback:f.callback_url||window.location.origin+"/player/my-purchases",onSuccess:F=>{console.log("Paiement réussi:",F),d.success("🎉 Paiement effectué avec succès !"),setTimeout(()=>{t("/player/my-purchases")},1500)},onFailed:F=>{console.error("Paiement échoué:",F),d.error("❌ Le paiement a échoué. Veuillez réessayer.")},data:`purchase-${f.reference||""}`,className:"w-full bg-gradient-to-r from-purple-600 to-indigo-600 text-white py-3 px-6 rounded-lg font-bold hover:from-purple-700 hover:to-indigo-700 transition-all cursor-pointer"})]})})()]})]})]}),e.jsxs(r,{className:"p-6 border-t border-gray-800 bg-gray-900 flex-shrink-0",renderId:"render-f062276e",as:"div",children:[!f&&e.jsx(r,{onClick:G,disabled:S||!h||u&&(!T||!w),className:"w-full bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 disabled:from-gray-700 disabled:to-gray-600 text-white py-4 rounded-lg font-bold text-lg transition-all disabled:cursor-not-allowed flex items-center justify-center gap-2",renderId:"render-dfbbc25c",as:"button",children:S?e.jsxs(e.Fragment,{children:[e.jsx(r,{className:"animate-spin rounded-full h-6 w-6 border-t-2 border-b-2 border-white",renderId:"render-80ba2fb9",as:"div"}),e.jsx(r,{renderId:"render-3c682526",as:"span",children:"Traitement..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(M,{className:"w-6 h-6"}),"Confirmer l'achat"]})}),e.jsx(r,{onClick:()=>g(!1),className:"w-full mt-3 py-3 text-gray-400 hover:text-white transition-colors font-medium",renderId:"render-44deee26",as:"button",children:"← Retour au choix du package"})]})]})})]})}):null}if(typeof window<"u"){const c={NEXT_PUBLIC_API_BASE:"https://votre-domaine.infinityfreeapp.com/api",NEXT_PUBLIC_KKIAPAY_PUBLIC_KEY:"072b361d25546db0aee3d69bf07b15331c51e39f",NEXT_PUBLIC_KKIAPAY_SANDBOX:"0"};globalThis.process??={};const t=globalThis.process.env??{};globalThis.process.env=new Proxy(Object.assign({},c,t),{get(a,o){return o in a?a[o]:void 0},has(){return!0}})}const Ce=q(function(t){const a=D();return e.jsx(H,{children:e.jsx(ne,{...t,gameId:a.gameId})})});export{Ce as default};
