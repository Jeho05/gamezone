import{r as i,w as Ie}from"./react-vendor-Ct9RIpkg.js";import{j as e}from"./ui-vendor-Bm7JQX2T.js";import{R as we}from"./layout-DT9dxTg9.js";import{C as r}from"./PolymorphicComponent-CaeVC8po.js";import{N as ye,C as _}from"./Navigation-uFWfAvUk.js";import{A as u}from"./apiBase-uKT1-15E.js";import{r as te}from"./avatarUrl-DJYax4aH.js";import{t as b}from"./index-Dwoj3kwW.js";import{F as Ne}from"./filter-CRY2orxT.js";import{I as K}from"./image-BOhTq8oj.js";import{P as ne}from"./play-BQh7zYqc.js";import{c as D}from"./createLucideIcon-CyDeinbq.js";import{E as ae}from"./eye-C9b1e9NH.js";import{X as de}from"./x-DLYRcRbV.js";import"./index-C7REL6_e.js";import"./gamepad-BKjcAtD2.js";import"./users-DtBMk0sz.js";import"./star-BS7t5YYQ.js";import"./sparkles-Cq5HuY9N.js";import"./trophy-Tx3IvyeC.js";if(typeof window<"u"){const l={NEXT_PUBLIC_API_BASE:"https://votre-domaine.infinityfreeapp.com/api",NEXT_PUBLIC_KKIAPAY_PUBLIC_KEY:"072b361d25546db0aee3d69bf07b15331c51e39f",NEXT_PUBLIC_KKIAPAY_SANDBOX:"0"};globalThis.process??={};const p=globalThis.process.env??{};globalThis.process.env=new Proxy(Object.assign({},l,p),{get(o,a){return a in o?o[a]:void 0},has(){return!0}})}const le=D("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);if(typeof window<"u"){const l={NEXT_PUBLIC_API_BASE:"https://votre-domaine.infinityfreeapp.com/api",NEXT_PUBLIC_KKIAPAY_PUBLIC_KEY:"072b361d25546db0aee3d69bf07b15331c51e39f",NEXT_PUBLIC_KKIAPAY_SANDBOX:"0"};globalThis.process??={};const p=globalThis.process.env??{};globalThis.process.env=new Proxy(Object.assign({},l,p),{get(o,a){return a in o?o[a]:void 0},has(){return!0}})}const j=D("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);if(typeof window<"u"){const l={NEXT_PUBLIC_API_BASE:"https://votre-domaine.infinityfreeapp.com/api",NEXT_PUBLIC_KKIAPAY_PUBLIC_KEY:"072b361d25546db0aee3d69bf07b15331c51e39f",NEXT_PUBLIC_KKIAPAY_SANDBOX:"0"};globalThis.process??={};const p=globalThis.process.env??{};globalThis.process.env=new Proxy(Object.assign({},l,p),{get(o,a){return a in o?o[a]:void 0},has(){return!0}})}const ve=D("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);if(typeof window<"u"){const l={NEXT_PUBLIC_API_BASE:"https://votre-domaine.infinityfreeapp.com/api",NEXT_PUBLIC_KKIAPAY_PUBLIC_KEY:"072b361d25546db0aee3d69bf07b15331c51e39f",NEXT_PUBLIC_KKIAPAY_SANDBOX:"0"};globalThis.process??={};const p=globalThis.process.env??{};globalThis.process.env=new Proxy(Object.assign({},l,p),{get(o,a){return a in o?o[a]:void 0},has(){return!0}})}const _e=D("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);if(typeof window<"u"){const l={NEXT_PUBLIC_API_BASE:"https://votre-domaine.infinityfreeapp.com/api",NEXT_PUBLIC_KKIAPAY_PUBLIC_KEY:"072b361d25546db0aee3d69bf07b15331c51e39f",NEXT_PUBLIC_KKIAPAY_SANDBOX:"0"};globalThis.process??={};const p=globalThis.process.env??{};globalThis.process.env=new Proxy(Object.assign({},l,p),{get(o,a){return a in o?o[a]:void 0},has(){return!0}})}function Ce(){const[l,p]=i.useState("all"),[o,a]=i.useState([]),[ce,C]=i.useState([]),[R,k]=i.useState([]),[ie,S]=i.useState([]),[oe,M]=i.useState(!1),[ke,Se]=i.useState(null),[xe,F]=i.useState(!1),[n,P]=i.useState(null),[A,q]=i.useState([]),[E,O]=i.useState(""),[z,J]=i.useState(!1),[T,Z]=i.useState(new Set),[L,me]=i.useState(null),[w,X]=i.useState(null),[H,G]=i.useState(null),[Y,U]=i.useState(""),[V,y]=i.useState(!1),[f,pe]=i.useState(null),W=async(s,t)=>{try{const d=await fetch(`${u}/content/like.php`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({content_id:s})}),c=await d.json();if(!d.ok)throw new Error(c?.error||"Échec du like");const x=c.action==="liked";b.success(c.message||(x?"Like ajouté !":"Like retiré !")),Z(g=>{const h=new Set(g);return x?h.add(s):h.delete(s),h});const m=g=>g.map(h=>h.id===s?{...h,likes_count:x?(h.likes_count||0)+1:Math.max(0,(h.likes_count||0)-1)}:h);a(m),C(m),k(m),S(m),n&&n.id===s&&P(g=>({...g,likes_count:x?(g.likes_count||0)+1:Math.max(0,(g.likes_count||0)-1)})),N()}catch(d){b.error(d.message||"Erreur lors du like")}};i.useEffect(()=>{ge(),he(),N()},[]);const he=async()=>{try{const s=await fetch(`${u}/auth/check.php`,{credentials:"include"});if(s.ok){const t=await s.json();t.authenticated&&t.user&&(me(t.user),console.log("[Gallery] Current user:",t.user))}}catch(s){console.error("[Gallery] Error loading current user:",s)}},N=async()=>{try{const s=await fetch(`${u}/content/stats.php`,{credentials:"include"});if(s.ok){const t=await s.json();t.success&&(pe(t.stats),console.log("[Gallery] Stats loaded:",t.stats))}}catch(s){console.error("[Gallery] Error loading stats:",s)}},I=async s=>{try{console.log("[Gallery] Opening detail for content:",s.id),F(!0),P(s);const d=await(await fetch(`${u}/content/public.php?id=${s.id}`,{credentials:"include"})).json();console.log("[Gallery] Detail data:",d),d.success&&(P(d.content),q(d.comments||[]),d.has_liked&&Z(c=>{const x=new Set(c);return x.add(s.id),x}))}catch(t){console.error("[Gallery] Error loading details:",t),b.error("Erreur de chargement des détails")}},Q=()=>{F(!1),P(null),q([]),O("")},ue=async s=>{if(s.preventDefault(),!(!E.trim()||!n))try{J(!0);const t=await fetch(`${u}/content/comment.php`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({content_id:n.id,comment:E.trim(),parent_id:w})}),d=await t.json();if(!t.ok)throw new Error(d?.error||"Échec de l'ajout du commentaire");b.success(w?"Réponse ajoutée !":"Commentaire ajouté !"),O(""),X(null),await I(n);const c=x=>x.map(m=>m.id===n.id?{...m,comments_count:(m.comments_count||0)+1}:m);a(c),C(c),k(c),S(c),N()}catch(t){b.error(t.message||"Erreur lors de l'ajout du commentaire")}finally{J(!1)}},be=async s=>{if(confirm("Supprimer ce commentaire ?"))try{const t=await fetch(`${u}/content/delete_comment.php?id=${s}`,{method:"DELETE",credentials:"include"}),d=await t.json();if(!t.ok)throw new Error(d?.error||"Échec de la suppression");b.success("Commentaire supprimé"),await I(n);const c=x=>x.map(m=>m.id===n.id?{...m,comments_count:Math.max(0,(m.comments_count||0)-1)}:m);a(c),C(c),k(c),S(c),N()}catch(t){b.error(t.message||"Erreur lors de la suppression")}},fe=async s=>{if(Y.trim())try{const t=await fetch(`${u}/content/edit_comment.php`,{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({id:s,comment:Y.trim()})}),d=await t.json();if(!t.ok)throw new Error(d?.error||"Échec de la modification");b.success("Commentaire modifié"),G(null),U(""),await I(n)}catch(t){b.error(t.message||"Erreur lors de la modification")}},v=async s=>{try{const t=`${window.location.origin}/player/gallery?id=${n.id}`,d=n.title,c=n.description||d;let x="";switch(s){case"facebook":x=`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(t)}`;break;case"twitter":x=`https://twitter.com/intent/tweet?url=${encodeURIComponent(t)}&text=${encodeURIComponent(d)}`;break;case"whatsapp":x=`https://wa.me/?text=${encodeURIComponent(d+" "+t)}`;break;case"telegram":x=`https://t.me/share/url?url=${encodeURIComponent(t)}&text=${encodeURIComponent(d)}`;break;case"copy_link":await navigator.clipboard.writeText(t),b.success("Lien copié dans le presse-papier !"),y(!1),await fetch(`${u}/content/share.php`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({content_id:n.id,platform:"copy_link"})});return}x&&(window.open(x,"_blank","width=600,height=400"),y(!1),await fetch(`${u}/content/share.php`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({content_id:n.id,platform:s})}),b.success("Merci pour le partage !"))}catch(t){console.error("[Gallery] Share error:",t),b.error("Erreur lors du partage")}},ge=async()=>{try{M(!0),console.log("[Gallery] Loading all content types...");const t=await(await fetch(`${u}/content/public.php?type=gallery&limit=50`,{credentials:"include"})).json();console.log("[Gallery] Gallery data:",t),t.success&&t.content&&a(t.content);const c=await(await fetch(`${u}/content/public.php?type=event&limit=20`,{credentials:"include"})).json();console.log("[Gallery] Events data:",c),c.success&&c.content&&C(c.content);const m=await(await fetch(`${u}/content/public.php?type=news&limit=10`,{credentials:"include"})).json();console.log("[Gallery] News data:",m),m.success&&m.content&&k(m.content);const h=await(await fetch(`${u}/content/public.php?type=stream&limit=10`,{credentials:"include"})).json();console.log("[Gallery] Streams data:",h),h.success&&h.content&&S(h.content)}catch(s){console.error("[Gallery] Load error:",s),b.error("Erreur de chargement: "+s.message)}finally{M(!1)}},ee=[...o.map(s=>({...s,type:"gallery"})),...ce.map(s=>({...s,type:"event"})),...R.map(s=>({...s,type:"news"})),...ie.map(s=>({...s,type:"stream"}))],B=l==="all"?ee:ee.filter(s=>s.type===l),re=s=>{switch(s){case"gallery":return e.jsx(K,{className:"w-5 h-5 text-purple-400"});case"event":return e.jsx(_,{className:"w-5 h-5 text-blue-400"});case"stream":return e.jsx(ne,{className:"w-5 h-5 text-red-400"});case"news":return e.jsx(j,{className:"w-5 h-5 text-green-400"});default:return e.jsx(K,{className:"w-5 h-5 text-gray-400"})}},se=s=>{switch(s){case"gallery":return"Galerie";case"event":return"Événement";case"stream":return"Stream";case"news":return"News";default:return s}},$=s=>new Date(s).toLocaleDateString("fr-FR",{day:"numeric",month:"long",year:"numeric"}),je=[{id:"all",label:"Tout",icon:Ne},{id:"gallery",label:"Galerie",icon:K},{id:"event",label:"Événements",icon:_},{id:"stream",label:"Streams",icon:ne},{id:"news",label:"News",icon:j}];return e.jsxs(r,{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900",renderId:"render-14d645a2",as:"div",children:[e.jsx(ye,{userType:"player",currentPage:"gallery"}),e.jsx(r,{className:"lg:pl-64",renderId:"render-923208f1",as:"div",children:e.jsxs(r,{className:"p-4 lg:p-8",renderId:"render-653f54d1",as:"div",children:[e.jsxs(r,{className:"mb-8",renderId:"render-938bd124",as:"div",children:[e.jsxs(r,{className:"text-3xl lg:text-4xl font-bold text-white mb-2 flex items-center space-x-3",renderId:"render-8f21bf94",as:"h1",children:[e.jsx(_,{className:"w-10 h-10 text-purple-400"}),e.jsx(r,{renderId:"render-27e5752f",as:"span",children:"Galerie & Actus"})]}),e.jsx(r,{className:"text-gray-300",renderId:"render-c5543d8d",as:"p",children:"Revivez les meilleurs moments gaming"})]}),e.jsx(r,{className:"mb-8",renderId:"render-d67b7223",as:"div",children:e.jsx(r,{className:"flex flex-wrap gap-2",renderId:"render-9a3d4350",as:"div",children:je.map(s=>{const t=s.icon;return e.jsxs(r,{onClick:()=>p(s.id),className:`flex items-center space-x-2 px-4 py-2 rounded-xl font-semibold transition-all duration-200 ${l===s.id?"bg-gradient-to-r from-purple-600 to-blue-600 text-white shadow-lg":"bg-white/10 text-gray-300 hover:text-white hover:bg-white/20 backdrop-blur-md border border-white/20"}`,renderId:"render-f283cee4",as:"button",children:[e.jsx(t,{className:"w-4 h-4"}),e.jsx(r,{renderId:"render-09b5717e",as:"span",children:s.label})]},s.id)})})}),e.jsxs(r,{className:"grid lg:grid-cols-3 gap-8",renderId:"render-893e23ea",as:"div",children:[e.jsx(r,{className:"lg:col-span-2",renderId:"render-3b17ad1b",as:"div",children:e.jsxs(r,{className:"bg-white/10 backdrop-blur-md border border-white/20 rounded-2xl p-6",renderId:"render-423c07ad",as:"div",children:[e.jsxs(r,{className:"text-xl font-bold text-white mb-6 flex items-center justify-between",renderId:"render-f1be1016",as:"h2",children:[e.jsxs(r,{renderId:"render-9f96f79f",as:"span",children:[l==="all"&&"Tout le Contenu",l==="gallery"&&"Galerie d'Images",l==="event"&&"Événements",l==="stream"&&"Streams",l==="news"&&"Actualités"]}),e.jsxs(r,{className:"text-sm text-gray-400 font-normal",renderId:"render-612ee2b5",as:"span",children:[B.length," élément",B.length>1?"s":""]})]}),oe?e.jsx(r,{className:"text-center py-12",renderId:"render-edb6b539",as:"div",children:e.jsx(r,{className:"inline-block animate-spin rounded-full h-12 w-12 border-t-4 border-b-4 border-purple-600",renderId:"render-3828d3c2",as:"div"})}):B.length===0?e.jsxs(r,{className:"text-center py-12 text-gray-400",renderId:"render-64cddd49",as:"div",children:[e.jsx(K,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),e.jsx(r,{renderId:"render-ff55946d",as:"p",children:"Aucun contenu pour le moment"})]}):e.jsx(r,{className:"grid gap-6",renderId:"render-f4eb922e",as:"div",children:B.map(s=>e.jsxs(r,{className:"bg-white/5 rounded-xl border border-white/10 overflow-hidden hover:bg-white/10 transition-all duration-200 group",renderId:"render-4447389c",as:"div",children:[s.image_url&&e.jsxs(r,{className:"aspect-video relative overflow-hidden cursor-pointer",onClick:()=>I(s),renderId:"render-dc691824",as:"div",children:[e.jsx(r,{src:s.image_url,alt:s.title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300",onError:t=>{t.target.src="https://via.placeholder.com/800x450?text=Image+non+disponible"},renderId:"render-d77f6b1e",as:"img"}),e.jsxs(r,{className:"absolute top-4 left-4 flex items-center space-x-2 bg-black/50 backdrop-blur-sm rounded-full px-3 py-1",renderId:"render-915de951",as:"div",children:[re(s.type),e.jsx(r,{className:"text-white text-sm font-semibold",renderId:"render-d2a03837",as:"span",children:se(s.type)})]}),s.is_pinned==1&&e.jsx(r,{className:"absolute top-4 right-4 bg-amber-500/80 backdrop-blur-sm rounded-full px-3 py-1",renderId:"render-69d48f21",as:"div",children:e.jsx(r,{className:"text-white text-sm font-semibold",renderId:"render-001e9b45",as:"span",children:"📌 Épinglé"})})]}),e.jsxs(r,{className:"p-6",renderId:"render-c285fbed",as:"div",children:[e.jsxs(r,{className:"flex items-center justify-between mb-3",renderId:"render-b74c84b9",as:"div",children:[e.jsx(r,{className:"text-xl font-bold text-white group-hover:text-purple-300 transition-colors cursor-pointer",onClick:()=>I(s),renderId:"render-25777880",as:"h3",children:s.title}),e.jsx(r,{className:"text-gray-400 text-sm",renderId:"render-facfdf40",as:"span",children:$(s.published_at||s.created_at)})]}),s.description&&e.jsx(r,{className:"text-gray-300 mb-4",renderId:"render-ee4bf369",as:"p",children:s.description}),s.event_location&&e.jsxs(r,{className:"text-gray-400 text-sm mb-2",renderId:"render-006cd00a",as:"p",children:["📍 ",s.event_location]}),e.jsxs(r,{className:"flex items-center justify-between",renderId:"render-ef285170",as:"div",children:[e.jsxs(r,{className:"flex items-center space-x-4 text-gray-400",renderId:"render-41aabd24",as:"div",children:[e.jsxs(r,{className:"flex items-center space-x-1",renderId:"render-c64f03b7",as:"div",children:[e.jsx(ae,{className:"w-4 h-4"}),e.jsx(r,{className:"text-sm",renderId:"render-7aaabcc3",as:"span",children:s.views_count||0})]}),e.jsxs(r,{onClick:t=>{t.stopPropagation(),W(s.id,s.type)},className:`flex items-center space-x-1 transition-colors ${T.has(s.id)?"text-red-500 hover:text-red-400":"text-gray-400 hover:text-red-400"}`,renderId:"render-e331b082",as:"button",children:[e.jsx(le,{className:`w-4 h-4 ${T.has(s.id)?"fill-current":""}`}),e.jsx(r,{className:"text-sm",renderId:"render-f93d4b63",as:"span",children:s.likes_count||0})]}),e.jsxs(r,{onClick:t=>{t.stopPropagation(),I(s)},className:"flex items-center space-x-1 hover:text-blue-400 transition-colors",renderId:"render-dd77ac8e",as:"button",children:[e.jsx(j,{className:"w-4 h-4"}),e.jsx(r,{className:"text-sm",renderId:"render-79c388fd",as:"span",children:s.comments_count||0})]})]}),s.author_name&&e.jsxs(r,{className:"text-xs text-gray-500",renderId:"render-318d2307",as:"span",children:["Par ",s.author_name]})]})]})]},s.id))})]})}),e.jsx(r,{renderId:"render-116a87b3",as:"div",children:e.jsxs(r,{className:"bg-white/10 backdrop-blur-md border border-white/20 rounded-2xl p-6",renderId:"render-696a4128",as:"div",children:[e.jsxs(r,{className:"text-xl font-bold text-white mb-6 flex items-center space-x-2",renderId:"render-b6ce3aae",as:"h2",children:[e.jsx(j,{className:"w-6 h-6 text-blue-400"}),e.jsx(r,{renderId:"render-6010fd11",as:"span",children:"Actualités"})]}),e.jsx(r,{className:"space-y-6",renderId:"render-65406c4c",as:"div",children:R.length===0?e.jsx(r,{className:"text-gray-400 text-sm text-center py-8",renderId:"render-da23d943",as:"p",children:"Aucune actualité disponible"}):R.map(s=>e.jsxs(r,{className:"group cursor-pointer",renderId:"render-de4d0dc2",as:"div",children:[s.image_url&&e.jsx(r,{className:"aspect-video rounded-lg overflow-hidden mb-3",renderId:"render-490df45e",as:"div",children:e.jsx(r,{src:s.image_url,alt:s.title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300",onError:t=>{t.target.src="https://via.placeholder.com/400x225?text=Image+non+disponible"},renderId:"render-b687d692",as:"img"})}),e.jsxs(r,{renderId:"render-259ee48b",as:"div",children:[e.jsx(r,{className:"text-gray-400 text-xs mb-2",renderId:"render-9f58c08e",as:"p",children:$(s.published_at||s.created_at)}),e.jsx(r,{className:"text-white font-semibold mb-2 group-hover:text-purple-300 transition-colors",renderId:"render-46a0bbc6",as:"h3",children:s.title}),s.description&&e.jsx(r,{className:"text-gray-300 text-sm line-clamp-3",renderId:"render-aaa58806",as:"p",children:s.description})]})]},s.id))}),e.jsxs(r,{className:"mt-8 p-4 bg-gradient-to-r from-purple-500/20 to-blue-500/20 rounded-xl border border-purple-400/30",renderId:"render-a0b49cbd",as:"div",children:[e.jsxs(r,{className:"text-white font-semibold mb-4 flex items-center justify-between",renderId:"render-53e4afbb",as:"h3",children:[e.jsx(r,{renderId:"render-95516833",as:"span",children:"Statistiques"}),e.jsx(r,{onClick:N,className:"text-xs text-gray-400 hover:text-white transition-colors",title:"Actualiser",renderId:"render-9b0ec8fb",as:"button",children:"🔄"})]}),f?e.jsxs(r,{className:"space-y-4",renderId:"render-7faf1e69",as:"div",children:[e.jsxs(r,{className:"space-y-3",renderId:"render-35312988",as:"div",children:[e.jsxs(r,{className:"flex justify-between items-center",renderId:"render-3a2f1f72",as:"div",children:[e.jsx(r,{className:"text-gray-300 text-sm",renderId:"render-29cf30b4",as:"span",children:"🖼️ Images galerie"}),e.jsx(r,{className:"text-purple-400 font-bold",renderId:"render-6a243292",as:"span",children:f.by_type.gallery.count})]}),e.jsxs(r,{className:"flex justify-between items-center",renderId:"render-cdea3921",as:"div",children:[e.jsx(r,{className:"text-gray-300 text-sm",renderId:"render-a4fe23c1",as:"span",children:"📅 Événements"}),e.jsx(r,{className:"text-blue-400 font-bold",renderId:"render-c2532ba4",as:"span",children:f.by_type.event.count})]}),e.jsxs(r,{className:"flex justify-between items-center",renderId:"render-484ada0b",as:"div",children:[e.jsx(r,{className:"text-gray-300 text-sm",renderId:"render-ec467c16",as:"span",children:"📰 Actualités"}),e.jsx(r,{className:"text-green-400 font-bold",renderId:"render-be73b9b8",as:"span",children:f.by_type.news.count})]}),e.jsxs(r,{className:"flex justify-between items-center",renderId:"render-f548335a",as:"div",children:[e.jsx(r,{className:"text-gray-300 text-sm",renderId:"render-4df11b68",as:"span",children:"▶️ Streams"}),e.jsx(r,{className:"text-red-400 font-bold",renderId:"render-1728cde4",as:"span",children:f.by_type.stream.count})]})]}),e.jsxs(r,{className:"pt-3 border-t border-white/20 space-y-2",renderId:"render-ee11f6b5",as:"div",children:[e.jsxs(r,{className:"flex justify-between items-center",renderId:"render-cff21412",as:"div",children:[e.jsx(r,{className:"text-gray-400 text-xs",renderId:"render-4d52fa60",as:"span",children:"👁️ Vues totales"}),e.jsx(r,{className:"text-gray-300 text-sm font-semibold",renderId:"render-c271764c",as:"span",children:Object.values(f.by_type).reduce((s,t)=>s+t.views,0).toLocaleString()})]}),e.jsxs(r,{className:"flex justify-between items-center",renderId:"render-960eaac1",as:"div",children:[e.jsx(r,{className:"text-gray-400 text-xs",renderId:"render-695b997d",as:"span",children:"❤️ Likes totaux"}),e.jsx(r,{className:"text-red-400 text-sm font-semibold",renderId:"render-aab5e44f",as:"span",children:f.total_likes.toLocaleString()})]}),e.jsxs(r,{className:"flex justify-between items-center",renderId:"render-0d15717a",as:"div",children:[e.jsx(r,{className:"text-gray-400 text-xs",renderId:"render-49e2c2ee",as:"span",children:"💬 Commentaires"}),e.jsx(r,{className:"text-blue-400 text-sm font-semibold",renderId:"render-8aee6685",as:"span",children:f.total_comments.toLocaleString()})]}),e.jsxs(r,{className:"flex justify-between items-center",renderId:"render-2c1e5f12",as:"div",children:[e.jsx(r,{className:"text-gray-400 text-xs",renderId:"render-c23a4889",as:"span",children:"🔗 Partages"}),e.jsx(r,{className:"text-green-400 text-sm font-semibold",renderId:"render-00fb9a64",as:"span",children:Object.values(f.by_type).reduce((s,t)=>s+t.shares,0).toLocaleString()})]})]}),f.top_views&&f.top_views.length>0&&e.jsxs(r,{className:"pt-3 border-t border-white/20",renderId:"render-79a9163d",as:"div",children:[e.jsx(r,{className:"text-xs text-gray-400 font-semibold mb-2",renderId:"render-634cc2e2",as:"h4",children:"🔥 Plus vus"}),e.jsx(r,{className:"space-y-1",renderId:"render-d9a14e55",as:"div",children:f.top_views.slice(0,3).map((s,t)=>e.jsxs(r,{className:"flex items-center justify-between text-xs",renderId:"render-7b98138c",as:"div",children:[e.jsxs(r,{className:"text-gray-300 truncate flex-1",title:s.title,renderId:"render-6cb2ac81",as:"span",children:[t+1,". ",s.title.substring(0,20),s.title.length>20?"...":""]}),e.jsx(r,{className:"text-purple-400 ml-2",renderId:"render-8385489b",as:"span",children:s.views_count})]},s.id))})]})]}):e.jsx(r,{className:"text-center py-4",renderId:"render-d923ee88",as:"div",children:e.jsx(r,{className:"inline-block animate-spin rounded-full h-6 w-6 border-t-2 border-b-2 border-purple-500",renderId:"render-ef3940e1",as:"div"})})]})]})})]})]})}),xe&&n&&e.jsx(r,{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm",onClick:s=>{s.target===s.currentTarget&&Q(),y(!1)},renderId:"render-a724a130",as:"div",children:e.jsxs(r,{className:"bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 rounded-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden border border-white/20 shadow-2xl",onClick:()=>y(!1),renderId:"render-bcb1dc04",as:"div",children:[e.jsxs(r,{className:"flex items-center justify-between p-6 border-b border-white/10",renderId:"render-05625316",as:"div",children:[e.jsxs(r,{className:"flex items-center space-x-3",renderId:"render-2a77b146",as:"div",children:[re(n.type),e.jsx(r,{className:"text-2xl font-bold text-white",renderId:"render-6c15a9c8",as:"h2",children:n.title})]}),e.jsx(r,{onClick:Q,className:"text-gray-400 hover:text-white transition-colors",renderId:"render-822e5dce",as:"button",children:e.jsx(de,{className:"w-6 h-6"})})]}),e.jsxs(r,{className:"overflow-y-auto max-h-[calc(90vh-120px)]",renderId:"render-550e9346",as:"div",children:[n.image_url&&e.jsx(r,{className:"aspect-video w-full",renderId:"render-2c67c0fd",as:"div",children:e.jsx(r,{src:n.image_url,alt:n.title,className:"w-full h-full object-cover",onError:s=>{s.target.src="https://via.placeholder.com/800x450?text=Image+non+disponible"},renderId:"render-afc15c00",as:"img"})}),e.jsxs(r,{className:"p-6 space-y-4",renderId:"render-d6c8425a",as:"div",children:[e.jsxs(r,{className:"flex items-center justify-between text-sm text-gray-400",renderId:"render-c8960c90",as:"div",children:[e.jsxs(r,{className:"flex items-center space-x-4",renderId:"render-a1aabbf4",as:"div",children:[e.jsxs(r,{renderId:"render-eab0ec85",as:"span",children:["Par ",n.author_name||"Admin"]}),e.jsx(r,{renderId:"render-291e8cab",as:"span",children:"•"}),e.jsx(r,{renderId:"render-0980174d",as:"span",children:$(n.published_at||n.created_at)})]}),e.jsx(r,{className:"px-3 py-1 bg-purple-500/20 text-purple-300 rounded-full text-xs font-semibold",renderId:"render-c1dd0570",as:"span",children:se(n.type)})]}),n.description&&e.jsx(r,{className:"text-gray-300 leading-relaxed",renderId:"render-a13229bb",as:"p",children:n.description}),n.content&&e.jsx(r,{className:"prose prose-invert max-w-none",renderId:"render-4e962e4a",as:"div",children:e.jsx(r,{className:"text-gray-300",renderId:"render-300d9453",as:"p",children:n.content})}),n.event_location&&e.jsxs(r,{className:"flex items-center space-x-2 text-gray-300",renderId:"render-c353edb8",as:"div",children:[e.jsx(_,{className:"w-4 h-4"}),e.jsxs(r,{renderId:"render-deb313ef",as:"span",children:["📍 ",n.event_location]})]}),n.event_date&&n.event_date!=="0000-00-00 00:00:00"&&e.jsxs(r,{className:"flex items-center space-x-2 text-gray-300",renderId:"render-dc257def",as:"div",children:[e.jsx(_,{className:"w-4 h-4"}),e.jsx(r,{renderId:"render-f72dd2ea",as:"span",children:$(n.event_date)})]}),e.jsxs(r,{className:"flex items-center justify-between pt-4 border-t border-white/10",renderId:"render-2e6b9cd7",as:"div",children:[e.jsxs(r,{className:"flex items-center space-x-6",renderId:"render-689c0e96",as:"div",children:[e.jsxs(r,{className:"flex items-center space-x-2 text-gray-400",renderId:"render-36fb4308",as:"div",children:[e.jsx(ae,{className:"w-5 h-5"}),e.jsxs(r,{renderId:"render-9e788c13",as:"span",children:[n.views_count||0," vues"]})]}),e.jsxs(r,{onClick:()=>W(n.id,n.type),className:`flex items-center space-x-2 transition-colors ${T.has(n.id)?"text-red-500 hover:text-red-400":"text-gray-400 hover:text-red-400"}`,renderId:"render-47c1ff6d",as:"button",children:[e.jsx(le,{className:`w-5 h-5 ${T.has(n.id)?"fill-current":""}`}),e.jsxs(r,{renderId:"render-63f40be1",as:"span",children:[n.likes_count||0," likes"]})]}),e.jsxs(r,{className:"flex items-center space-x-2 text-gray-400",renderId:"render-3be3de31",as:"div",children:[e.jsx(j,{className:"w-5 h-5"}),e.jsxs(r,{renderId:"render-b890963c",as:"span",children:[A.length," commentaire",A.length>1?"s":""]})]})]}),e.jsxs(r,{className:"relative",renderId:"render-98706bb0",as:"div",children:[e.jsxs(r,{onClick:()=>y(!V),className:"flex items-center space-x-2 px-4 py-2 bg-white/10 hover:bg-white/20 text-gray-300 hover:text-white rounded-lg transition-colors",renderId:"render-e4c5b328",as:"button",children:[e.jsx(_e,{className:"w-5 h-5"}),e.jsx(r,{renderId:"render-1c9be34e",as:"span",children:"Partager"})]}),V&&e.jsxs(r,{className:"absolute right-0 mt-2 w-48 bg-slate-800 border border-white/20 rounded-lg shadow-xl overflow-hidden z-10",renderId:"render-f4594c72",as:"div",children:[e.jsxs(r,{onClick:()=>v("facebook"),className:"w-full flex items-center space-x-3 px-4 py-3 hover:bg-white/10 text-white transition-colors",renderId:"render-c0679a6a",as:"button",children:[e.jsx(r,{className:"text-xl",renderId:"render-9418332a",as:"span",children:"📘"}),e.jsx(r,{renderId:"render-0010b783",as:"span",children:"Facebook"})]}),e.jsxs(r,{onClick:()=>v("twitter"),className:"w-full flex items-center space-x-3 px-4 py-3 hover:bg-white/10 text-white transition-colors",renderId:"render-a44ba021",as:"button",children:[e.jsx(r,{className:"text-xl",renderId:"render-cd94055f",as:"span",children:"🐦"}),e.jsx(r,{renderId:"render-7ed477fb",as:"span",children:"Twitter"})]}),e.jsxs(r,{onClick:()=>v("whatsapp"),className:"w-full flex items-center space-x-3 px-4 py-3 hover:bg-white/10 text-white transition-colors",renderId:"render-7202588a",as:"button",children:[e.jsx(r,{className:"text-xl",renderId:"render-96361b85",as:"span",children:"💬"}),e.jsx(r,{renderId:"render-8e1f38d2",as:"span",children:"WhatsApp"})]}),e.jsxs(r,{onClick:()=>v("telegram"),className:"w-full flex items-center space-x-3 px-4 py-3 hover:bg-white/10 text-white transition-colors",renderId:"render-8ecf91f8",as:"button",children:[e.jsx(r,{className:"text-xl",renderId:"render-769ed0ad",as:"span",children:"✈️"}),e.jsx(r,{renderId:"render-e64fc8bd",as:"span",children:"Telegram"})]}),e.jsxs(r,{onClick:()=>v("copy_link"),className:"w-full flex items-center space-x-3 px-4 py-3 hover:bg-white/10 text-white transition-colors border-t border-white/10",renderId:"render-00de639d",as:"button",children:[e.jsx(r,{className:"text-xl",renderId:"render-b96ffe0a",as:"span",children:"🔗"}),e.jsx(r,{renderId:"render-b9be5112",as:"span",children:"Copier le lien"})]})]})]})]}),e.jsxs(r,{className:"pt-6 border-t border-white/10",renderId:"render-45acbc22",as:"div",children:[e.jsxs(r,{className:"text-xl font-bold text-white mb-4 flex items-center space-x-2",renderId:"render-72ee725b",as:"h3",children:[e.jsx(j,{className:"w-5 h-5"}),e.jsx(r,{renderId:"render-a6d0d6a9",as:"span",children:"Commentaires"})]}),e.jsxs(r,{onSubmit:ue,className:"mb-6",renderId:"render-8f123080",as:"form",children:[w&&e.jsxs(r,{className:"mb-2 flex items-center justify-between bg-blue-500/10 border border-blue-400/30 rounded-lg px-3 py-2",renderId:"render-81732ca6",as:"div",children:[e.jsx(r,{className:"text-sm text-blue-300",renderId:"render-1df98df4",as:"span",children:"Répondre à un commentaire..."}),e.jsx(r,{type:"button",onClick:()=>X(null),className:"text-gray-400 hover:text-white",renderId:"render-e22e4079",as:"button",children:e.jsx(de,{className:"w-4 h-4"})})]}),e.jsxs(r,{className:"flex space-x-2",renderId:"render-2455c29c",as:"div",children:[e.jsx(r,{type:"text",value:E,onChange:s=>O(s.target.value),placeholder:w?"Votre réponse...":"Ajouter un commentaire...",className:"flex-1 bg-white/10 border border-white/20 rounded-lg px-4 py-2 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500",disabled:z,renderId:"render-2ac6d027",as:"input"}),e.jsxs(r,{type:"submit",disabled:z||!E.trim(),className:"px-4 py-2 bg-gradient-to-r from-purple-600 to-blue-600 text-white rounded-lg font-semibold hover:from-purple-700 hover:to-blue-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",renderId:"render-f6a682ad",as:"button",children:[e.jsx(ve,{className:"w-4 h-4"}),e.jsx(r,{renderId:"render-2320b333",as:"span",children:w?"Répondre":"Envoyer"})]})]})]}),e.jsx(r,{className:"space-y-4",renderId:"render-4704ee55",as:"div",children:A.length===0?e.jsx(r,{className:"text-gray-400 text-center py-8",renderId:"render-588feeea",as:"p",children:"Aucun commentaire pour le moment. Soyez le premier à commenter !"}):A.map(s=>e.jsx(r,{className:"bg-white/5 rounded-lg p-4 border border-white/10",renderId:"render-8ff594f6",as:"div",children:e.jsxs(r,{className:"flex items-start space-x-3",renderId:"render-4a8cafc5",as:"div",children:[s.avatar_url?e.jsx(r,{src:te(s.avatar_url,s.username),alt:s.username,className:"w-10 h-10 rounded-full",renderId:"render-cb2d8d5d",as:"img"}):e.jsx(r,{className:"w-10 h-10 rounded-full bg-purple-600 flex items-center justify-center text-white font-bold",renderId:"render-f1619f1c",as:"div",children:s.username?.charAt(0).toUpperCase()}),e.jsxs(r,{className:"flex-1",renderId:"render-f6716d84",as:"div",children:[e.jsxs(r,{className:"flex items-center justify-between mb-1",renderId:"render-6a39c4bb",as:"div",children:[e.jsxs(r,{className:"flex items-center space-x-2",renderId:"render-3e697471",as:"div",children:[e.jsx(r,{className:"font-semibold text-white",renderId:"render-1a0f7a64",as:"span",children:s.username}),e.jsx(r,{className:"text-xs text-gray-500",renderId:"render-e2942c5d",as:"span",children:new Date(s.created_at).toLocaleDateString("fr-FR",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"})}),s.created_at!==s.updated_at&&e.jsx(r,{className:"text-xs text-gray-500 italic",renderId:"render-1e4bb453",as:"span",children:"(édité)"})]}),L&&(L.id===s.user_id||L.role==="admin")&&e.jsxs(r,{className:"flex items-center space-x-2",renderId:"render-15c4f39e",as:"div",children:[L.id===s.user_id&&e.jsx(r,{onClick:()=>{G(s.id),U(s.comment)},className:"text-xs text-blue-400 hover:text-blue-300",renderId:"render-bf64df7e",as:"button",children:"Modifier"}),e.jsx(r,{onClick:()=>be(s.id),className:"text-xs text-red-400 hover:text-red-300",renderId:"render-2cebe5a0",as:"button",children:"Supprimer"})]})]}),H===s.id?e.jsx(r,{className:"mt-2",renderId:"render-519d6ed8",as:"div",children:e.jsxs(r,{className:"flex space-x-2",renderId:"render-bfea7576",as:"div",children:[e.jsx(r,{type:"text",value:Y,onChange:t=>U(t.target.value),className:"flex-1 bg-white/10 border border-white/20 rounded px-3 py-1 text-white text-sm focus:outline-none focus:ring-2 focus:ring-purple-500",autoFocus:!0,renderId:"render-ba598322",as:"input"}),e.jsx(r,{onClick:()=>fe(s.id),className:"px-3 py-1 bg-green-600 hover:bg-green-700 text-white text-sm rounded",renderId:"render-cacdc506",as:"button",children:"OK"}),e.jsx(r,{onClick:()=>{G(null),U("")},className:"px-3 py-1 bg-gray-600 hover:bg-gray-700 text-white text-sm rounded",renderId:"render-3476b416",as:"button",children:"Annuler"})]})}):e.jsxs(e.Fragment,{children:[e.jsx(r,{className:"text-gray-300",renderId:"render-c7182915",as:"p",children:s.comment}),e.jsxs(r,{onClick:()=>X(s.id),className:"mt-2 text-xs text-purple-400 hover:text-purple-300 flex items-center space-x-1",renderId:"render-6cfbb76f",as:"button",children:[e.jsx(j,{className:"w-3 h-3"}),e.jsx(r,{renderId:"render-461ac0dd",as:"span",children:"Répondre"})]})]}),!H&&s.replies&&s.replies.length>0&&e.jsx(r,{className:"mt-3 ml-4 space-y-2 border-l-2 border-purple-500/30 pl-4",renderId:"render-83e05e18",as:"div",children:s.replies.map(t=>e.jsxs(r,{className:"flex items-start space-x-2",renderId:"render-82006105",as:"div",children:[t.avatar_url?e.jsx(r,{src:te(t.avatar_url,t.username),alt:t.username,className:"w-8 h-8 rounded-full",renderId:"render-19039030",as:"img"}):e.jsx(r,{className:"w-8 h-8 rounded-full bg-blue-600 flex items-center justify-center text-white text-xs font-bold",renderId:"render-3d3e7c90",as:"div",children:t.username?.charAt(0).toUpperCase()}),e.jsxs(r,{className:"flex-1",renderId:"render-3c7e941b",as:"div",children:[e.jsxs(r,{className:"flex items-center space-x-2",renderId:"render-baad1ffa",as:"div",children:[e.jsx(r,{className:"font-semibold text-white text-sm",renderId:"render-2e222516",as:"span",children:t.username}),e.jsx(r,{className:"text-xs text-gray-500",renderId:"render-b181fd43",as:"span",children:new Date(t.created_at).toLocaleDateString("fr-FR",{day:"numeric",month:"short"})})]}),e.jsx(r,{className:"text-gray-300 text-sm",renderId:"render-03fa04d8",as:"p",children:t.comment})]})]},t.id))})]})]})},s.id))})]})]})]})]})})]})}if(typeof window<"u"){const l={NEXT_PUBLIC_API_BASE:"https://votre-domaine.infinityfreeapp.com/api",NEXT_PUBLIC_KKIAPAY_PUBLIC_KEY:"072b361d25546db0aee3d69bf07b15331c51e39f",NEXT_PUBLIC_KKIAPAY_SANDBOX:"0"};globalThis.process??={};const p=globalThis.process.env??{};globalThis.process.env=new Proxy(Object.assign({},l,p),{get(o,a){return a in o?o[a]:void 0},has(){return!0}})}const Ze=Ie(function(p){return e.jsx(we,{children:e.jsx(Ce,{...p})})});export{Ze as default};
