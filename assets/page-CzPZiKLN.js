import{r as u,w as y}from"./react-vendor-BXH1ZKCn.js";import{j as e}from"./ui-vendor-CptTL0WJ.js";import{R as N}from"./layout-CA9ilw8C.js";import{C as r}from"./PolymorphicComponent-CmmJTj6d.js";import{t as o}from"./index-DeIfEMOZ.js";import{N as h}from"./Navigation-C_UvFhfu.js";import{A as m}from"./apiBase-uKT1-15E.js";import"./gamepad-D9JnDti4.js";import"./createLucideIcon-BCGXG0XW.js";import"./users-uhOgvxGK.js";import"./sparkles-BFQn3fMP.js";import"./trophy-CUmIdvP5.js";import"./x-BQPNjVqT.js";if(typeof window<"u"){const t={NEXT_PUBLIC_API_BASE:"https://votre-domaine.infinityfreeapp.com/api",NEXT_PUBLIC_KKIAPAY_PUBLIC_KEY:"072b361d25546db0aee3d69bf07b15331c51e39f",NEXT_PUBLIC_KKIAPAY_SANDBOX:"0"};globalThis.process??={};const l=globalThis.process.env??{};globalThis.process.env=new Proxy(Object.assign({},t,l),{get(i,s){return s in i?i[s]:void 0},has(){return!0}})}function v(){const[t,l]=u.useState([]),[i,s]=u.useState([]),[c,f]=u.useState(!0),[n,b]=u.useState(!1),x=async()=>{try{const d=await(await fetch(`${m}/admin/bonus_multipliers.php`,{credentials:"include"})).json();l(d.multipliers||[]);const j=await(await fetch(`${m}/users/index.php`,{credentials:"include"})).json();s(j.items||[])}catch{o.error("Erreur lors du chargement")}finally{f(!1)}};u.useEffect(()=>{x()},[]);const g=async a=>{try{console.log("Sending data:",a);const d=await fetch(`${m}/gamification/bonus_multiplier.php`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(a)}),p=await d.json();if(console.log("Response:",p),!d.ok)throw new Error(p.error||"Failed");o.success("Multiplicateur cr√©√©"),x(),b(!1)}catch(d){console.error("Create error:",d),o.error("Erreur: "+d.message)}},I=async a=>{if(confirm("Supprimer ce multiplicateur ?"))try{if(!(await fetch(`${m}/gamification/bonus_multiplier.php?id=${a}`,{method:"DELETE",credentials:"include"})).ok)throw new Error("Failed");o.success("Multiplicateur supprim√©"),x()}catch{o.error("Erreur lors de la suppression")}};return c?e.jsxs(r,{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900",renderId:"render-0a124342",as:"div",children:[e.jsx(h,{userType:"admin",currentPage:"bonuses"}),e.jsx(r,{className:"lg:pl-64",renderId:"render-e4e79d47",as:"div",children:e.jsx(r,{className:"flex items-center justify-center min-h-screen",renderId:"render-4063f24c",as:"div",children:e.jsx(r,{className:"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-purple-500",renderId:"render-f613c461",as:"div"})})})]}):e.jsxs(r,{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900",renderId:"render-a9931f29",as:"div",children:[e.jsx(h,{userType:"admin",currentPage:"bonuses"}),e.jsx(r,{className:"lg:pl-64",renderId:"render-a4789439",as:"div",children:e.jsx(r,{className:"p-4 lg:p-8",renderId:"render-9112adf4",as:"div",children:e.jsxs(r,{className:"max-w-6xl mx-auto",renderId:"render-0b515d43",as:"div",children:[e.jsxs(r,{className:"mb-8 flex items-center justify-between",renderId:"render-ec4a1b73",as:"div",children:[e.jsxs(r,{renderId:"render-6f3809a4",as:"div",children:[e.jsx(r,{className:"text-4xl font-bold mb-2 bg-gradient-to-r from-cyan-400 to-blue-500 text-transparent bg-clip-text",renderId:"render-978169b9",as:"h1",children:"üéØ Bonus Sp√©ciaux"}),e.jsx(r,{className:"text-gray-400",renderId:"render-5daa9a92",as:"p",children:"G√©rez les multiplicateurs de points temporaires"})]}),e.jsx(r,{onClick:()=>b(!0),className:"px-6 py-3 bg-gradient-to-r from-cyan-500 to-blue-500 rounded-lg font-bold",renderId:"render-0c2ece31",as:"button",children:"+ Nouveau multiplicateur"})]}),e.jsxs(r,{className:"mb-8",renderId:"render-390be66e",as:"div",children:[e.jsxs(r,{className:"text-xl font-bold mb-4",renderId:"render-00efe735",as:"h2",children:["Multiplicateurs actifs (",t.length,")"]}),t.length===0?e.jsx(r,{className:"text-center py-12 bg-gray-800/50 rounded-lg",renderId:"render-e8158678",as:"div",children:e.jsx(r,{className:"text-gray-500",renderId:"render-86c7772e",as:"p",children:"Aucun multiplicateur actif"})}):e.jsx(r,{className:"space-y-4",renderId:"render-cd68db60",as:"div",children:t.map(a=>{const d=i.find(p=>p.id===a.user_id);return e.jsx(r,{className:"bg-gradient-to-r from-orange-500/20 to-red-500/20 rounded-lg p-6 border-2 border-orange-500/50",renderId:"render-288a03e7",as:"div",children:e.jsxs(r,{className:"flex items-center justify-between",renderId:"render-b705e9d4",as:"div",children:[e.jsxs(r,{className:"flex items-center gap-6",renderId:"render-2d670d20",as:"div",children:[e.jsxs(r,{className:"text-4xl font-bold text-orange-400",renderId:"render-a44f4c86",as:"div",children:["x",a.multiplier]}),e.jsxs(r,{renderId:"render-694b41ef",as:"div",children:[e.jsx(r,{className:"text-lg font-bold",renderId:"render-c73224fa",as:"h3",children:d?.username||`User #${a.user_id}`}),e.jsx(r,{className:"text-sm text-gray-400",renderId:"render-95439047",as:"p",children:a.reason})]})]}),e.jsx(r,{onClick:()=>I(a.id),className:"px-4 py-2 bg-red-500/20 text-red-400 rounded",renderId:"render-15585f83",as:"button",children:"Supprimer"})]})},a.id)})})]}),n&&e.jsx(_,{users:i,onCreate:g,onClose:()=>b(!1)})]})})})]})}function _({users:t,onCreate:l,onClose:i}){const[s,c]=u.useState({user_id:0,multiplier:2,reason:"",duration_hours:24}),f=n=>{if(n.preventDefault(),!s.user_id||s.user_id===0){o.error("Veuillez s√©lectionner un utilisateur");return}if(!s.reason.trim()){o.error("Veuillez entrer une raison");return}l(s)};return e.jsx(r,{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",renderId:"render-535371f3",as:"div",children:e.jsxs(r,{className:"bg-gray-800 rounded-lg p-8 max-w-md w-full",renderId:"render-3a3e925e",as:"div",children:[e.jsx(r,{className:"text-2xl font-bold mb-6",renderId:"render-90739f8e",as:"h2",children:"Nouveau Multiplicateur"}),e.jsxs(r,{onSubmit:f,className:"space-y-4",renderId:"render-e6d167d6",as:"form",children:[e.jsxs(r,{renderId:"render-5b5da5ce",as:"div",children:[e.jsx(r,{className:"block mb-2",renderId:"render-1bfdf42b",as:"label",children:"Utilisateur"}),e.jsxs(r,{value:s.user_id,onChange:n=>c({...s,user_id:parseInt(n.target.value)||0}),className:"w-full px-4 py-2 bg-gray-700 rounded",required:!0,renderId:"render-624ad960",as:"select",children:[e.jsx(r,{value:"",renderId:"render-b6ce0371",as:"option",children:"S√©lectionner un utilisateur"}),t.map(n=>e.jsxs(r,{value:n.id,renderId:"render-0a0a9105",as:"option",children:[n.username," (ID: ",n.id,")"]},n.id))]})]}),e.jsxs(r,{renderId:"render-fd252ce7",as:"div",children:[e.jsx(r,{className:"block mb-2",renderId:"render-1eca6f8d",as:"label",children:"Multiplicateur"}),e.jsx(r,{type:"number",step:"0.1",min:"1.0",max:"10.0",value:s.multiplier,onChange:n=>c({...s,multiplier:parseFloat(n.target.value)||1}),className:"w-full px-4 py-2 bg-gray-700 rounded",required:!0,renderId:"render-64de9ebd",as:"input"})]}),e.jsxs(r,{renderId:"render-568caa43",as:"div",children:[e.jsx(r,{className:"block mb-2",renderId:"render-dbdf0e92",as:"label",children:"Raison"}),e.jsx(r,{type:"text",value:s.reason,onChange:n=>c({...s,reason:n.target.value}),className:"w-full px-4 py-2 bg-gray-700 rounded",renderId:"render-a8d7ff8c",as:"input"})]}),e.jsxs(r,{renderId:"render-f957a428",as:"div",children:[e.jsx(r,{className:"block mb-2",renderId:"render-5ac84719",as:"label",children:"Dur√©e (heures)"}),e.jsx(r,{type:"number",min:"1",value:s.duration_hours,onChange:n=>c({...s,duration_hours:parseInt(n.target.value)||1}),className:"w-full px-4 py-2 bg-gray-700 rounded",required:!0,renderId:"render-a893ebf4",as:"input"})]}),e.jsxs(r,{className:"flex gap-3",renderId:"render-4c26a836",as:"div",children:[e.jsx(r,{type:"button",onClick:i,className:"flex-1 px-4 py-3 bg-gray-700 rounded",renderId:"render-6ddab11c",as:"button",children:"Annuler"}),e.jsx(r,{type:"submit",className:"flex-1 px-4 py-3 bg-cyan-500 rounded",renderId:"render-ce299992",as:"button",children:"Cr√©er"})]})]})]})})}if(typeof window<"u"){const t={NEXT_PUBLIC_API_BASE:"https://votre-domaine.infinityfreeapp.com/api",NEXT_PUBLIC_KKIAPAY_PUBLIC_KEY:"072b361d25546db0aee3d69bf07b15331c51e39f",NEXT_PUBLIC_KKIAPAY_SANDBOX:"0"};globalThis.process??={};const l=globalThis.process.env??{};globalThis.process.env=new Proxy(Object.assign({},t,l),{get(i,s){return s in i?i[s]:void 0},has(){return!0}})}const K=y(function(l){return e.jsx(N,{children:e.jsx(v,{...l})})});export{K as default};
