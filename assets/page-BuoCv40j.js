import{r as c,w as T}from"./react-vendor-Ct9RIpkg.js";import{j as e}from"./ui-vendor-Bm7JQX2T.js";import{R as S}from"./layout-DT9dxTg9.js";import{C as r}from"./PolymorphicComponent-CaeVC8po.js";import{N as E,A as I}from"./Navigation-uFWfAvUk.js";import{A as v}from"./apiBase-uKT1-15E.js";import{t as h}from"./index-Dwoj3kwW.js";import{r as $}from"./avatarUrl-DJYax4aH.js";import{R as w}from"./refresh-cw-CApMwsX6.js";import{P as b}from"./play-BQh7zYqc.js";import{C as y}from"./clock-Dw7Syj2h.js";import{P as g}from"./pause-C4zf4-jw.js";import{T as B}from"./trending-up-Dz8cAqw-.js";import{T as L}from"./triangle-alert-Cv_qy4XN.js";import{U}from"./user-CRwh8MzD.js";import{G as k}from"./gamepad-2-CIt1vOKC.js";import{S as K}from"./square-CYAAZtqH.js";import{C as R}from"./circle-check-big-Dl2mg9cX.js";import"./index-C7REL6_e.js";import"./gamepad-BKjcAtD2.js";import"./createLucideIcon-CyDeinbq.js";import"./users-DtBMk0sz.js";import"./star-BS7t5YYQ.js";import"./sparkles-Cq5HuY9N.js";import"./trophy-Tx3IvyeC.js";import"./x-DLYRcRbV.js";if(typeof window<"u"){const n={NEXT_PUBLIC_API_BASE:"https://votre-domaine.infinityfreeapp.com/api",NEXT_PUBLIC_KKIAPAY_PUBLIC_KEY:"072b361d25546db0aee3d69bf07b15331c51e39f",NEXT_PUBLIC_KKIAPAY_SANDBOX:"0"};globalThis.process??={};const i=globalThis.process.env??{};globalThis.process.env=new Proxy(Object.assign({},n,i),{get(d,l){return l in d?d[l]:void 0},has(){return!0}})}function O(){const[n,i]=c.useState([]),[d,l]=c.useState(null),[f,_]=c.useState(!0),[x,j]=c.useState(null),[o,A]=c.useState(!0);c.useEffect(()=>{p();const s=o?setInterval(p,3e4):null;return()=>clearInterval(s)},[o]);const p=async()=>{try{const a=await(await fetch(`${v}/admin/active_sessions.php`,{credentials:"include"})).json();a.success&&(i(a.sessions||[]),l(a.stats||{}))}catch(s){console.error(s)}finally{_(!1)}},u=async(s,a)=>{try{j(`${s}-${a}`);const m=await(await fetch(`${v}/admin/manage_session.php`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({session_id:s,action:a})})).json();m.success?(h.success(m.message||"Action effectuée"),p()):h.error(m.error||"Erreur")}catch(t){console.error(t),h.error("Erreur de connexion")}finally{j(null)}},P=s=>{const a={active:{bg:"bg-green-600",text:"En cours",icon:b},paused:{bg:"bg-yellow-600",text:"En pause",icon:g},ready:{bg:"bg-blue-600",text:"Prêt",icon:y},completed:{bg:"bg-gray-600",text:"Terminé",icon:R}},t=a[s]||a.ready,m=t.icon;return e.jsxs(r,{className:`${t.bg} text-white px-3 py-1 rounded-full text-sm flex items-center gap-1`,renderId:"render-a2f9d090",as:"span",children:[e.jsx(m,{className:"w-4 h-4"}),t.text]})},N=s=>{const a=Math.floor(s/60),t=s%60;return a>0?`${a}h ${t}min`:`${t}min`},C=(s,a)=>{const t=s/a*100;return t>50?"bg-green-500":t>20?"bg-yellow-500":"bg-red-500"};return e.jsxs(r,{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900",renderId:"render-27a34f6c",as:"div",children:[e.jsx(E,{}),e.jsxs(r,{className:"container mx-auto px-4 py-8",renderId:"render-b2998a37",as:"div",children:[e.jsx(r,{className:"mb-8",renderId:"render-4f7049fa",as:"div",children:e.jsxs(r,{className:"flex items-center justify-between mb-4",renderId:"render-8918e5e3",as:"div",children:[e.jsxs(r,{renderId:"render-290cba41",as:"div",children:[e.jsxs(r,{className:"text-4xl font-bold text-white mb-2 flex items-center gap-3",renderId:"render-f174beca",as:"h1",children:[e.jsx(I,{className:"w-10 h-10 text-purple-400"}),"Sessions Actives"]}),e.jsx(r,{className:"text-gray-400",renderId:"render-b2ea5f1d",as:"p",children:"Gérez les sessions de jeu en temps réel"})]}),e.jsxs(r,{className:"flex items-center gap-3",renderId:"render-e533cd48",as:"div",children:[e.jsxs(r,{onClick:()=>A(!o),className:`px-4 py-2 rounded-lg font-semibold transition-all ${o?"bg-green-600 text-white":"bg-gray-600 text-gray-300"}`,renderId:"render-019eb6ac",as:"button",children:["Auto-refresh: ",o?"ON":"OFF"]}),e.jsxs(r,{onClick:p,disabled:f,className:"px-4 py-2 bg-purple-600 text-white rounded-lg font-semibold hover:bg-purple-700 disabled:opacity-50 flex items-center gap-2",renderId:"render-eb109877",as:"button",children:[e.jsx(w,{className:`w-4 h-4 ${f?"animate-spin":""}`}),"Actualiser"]})]})]})}),d&&e.jsxs(r,{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",renderId:"render-1e0dd5b8",as:"div",children:[e.jsxs(r,{className:"bg-gradient-to-br from-green-600 to-green-700 rounded-xl p-6 text-white",renderId:"render-0dcdc0ec",as:"div",children:[e.jsxs(r,{className:"flex items-center justify-between mb-2",renderId:"render-a4187636",as:"div",children:[e.jsx(b,{className:"w-8 h-8"}),e.jsx(r,{className:"text-3xl font-bold",renderId:"render-69b453c1",as:"span",children:d.active||0})]}),e.jsx(r,{className:"text-green-100",renderId:"render-674662ce",as:"div",children:"Sessions Actives"})]}),e.jsxs(r,{className:"bg-gradient-to-br from-blue-600 to-blue-700 rounded-xl p-6 text-white",renderId:"render-9097ee49",as:"div",children:[e.jsxs(r,{className:"flex items-center justify-between mb-2",renderId:"render-43210886",as:"div",children:[e.jsx(y,{className:"w-8 h-8"}),e.jsx(r,{className:"text-3xl font-bold",renderId:"render-ecfa6a73",as:"span",children:d.ready||0})]}),e.jsx(r,{className:"text-blue-100",renderId:"render-cd3f2a4e",as:"div",children:"En Attente"})]}),e.jsxs(r,{className:"bg-gradient-to-br from-yellow-600 to-yellow-700 rounded-xl p-6 text-white",renderId:"render-6c220945",as:"div",children:[e.jsxs(r,{className:"flex items-center justify-between mb-2",renderId:"render-1ec1c608",as:"div",children:[e.jsx(g,{className:"w-8 h-8"}),e.jsx(r,{className:"text-3xl font-bold",renderId:"render-a810be6e",as:"span",children:d.paused||0})]}),e.jsx(r,{className:"text-yellow-100",renderId:"render-def32019",as:"div",children:"En Pause"})]}),e.jsxs(r,{className:"bg-gradient-to-br from-purple-600 to-purple-700 rounded-xl p-6 text-white",renderId:"render-177393f4",as:"div",children:[e.jsxs(r,{className:"flex items-center justify-between mb-2",renderId:"render-6d5a3f21",as:"div",children:[e.jsx(B,{className:"w-8 h-8"}),e.jsx(r,{className:"text-3xl font-bold",renderId:"render-71c25e2d",as:"span",children:d.total||0})]}),e.jsx(r,{className:"text-purple-100",renderId:"render-551af863",as:"div",children:"Total Aujourd'hui"})]})]}),f&&!n.length?e.jsxs(r,{className:"bg-white/10 backdrop-blur-lg rounded-xl p-12 text-center",renderId:"render-70c86f5e",as:"div",children:[e.jsx(w,{className:"w-12 h-12 text-purple-400 animate-spin mx-auto mb-4"}),e.jsx(r,{className:"text-gray-300",renderId:"render-3e945e63",as:"p",children:"Chargement des sessions..."})]}):n.length===0?e.jsxs(r,{className:"bg-white/10 backdrop-blur-lg rounded-xl p-12 text-center",renderId:"render-682ddcbc",as:"div",children:[e.jsx(I,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx(r,{className:"text-xl font-bold text-white mb-2",renderId:"render-86f2deb8",as:"h3",children:"Aucune session active"}),e.jsx(r,{className:"text-gray-400",renderId:"render-56bc11c9",as:"p",children:"Les sessions apparaîtront ici une fois qu'un joueur aura scanné sa facture"})]}):e.jsx(r,{className:"space-y-4",renderId:"render-63607699",as:"div",children:n.map(s=>e.jsxs(r,{className:"bg-white/10 backdrop-blur-lg rounded-xl p-6 border border-white/20",renderId:"render-4f4a5725",as:"div",children:[e.jsxs(r,{className:"flex items-start justify-between mb-4",renderId:"render-2fc6e0f4",as:"div",children:[e.jsxs(r,{className:"flex-1",renderId:"render-74a22834",as:"div",children:[e.jsxs(r,{className:"flex items-center gap-3 mb-2",renderId:"render-6299dbe7",as:"div",children:[P(s.status),s.remaining_minutes<=5&&s.status==="active"&&e.jsxs(r,{className:"bg-red-600 text-white px-3 py-1 rounded-full text-sm flex items-center gap-1 animate-pulse",renderId:"render-48505d8a",as:"span",children:[e.jsx(L,{className:"w-4 h-4"}),"Temps faible !"]})]}),e.jsxs(r,{className:"grid grid-cols-2 gap-4 mt-4",renderId:"render-9e40ae65",as:"div",children:[e.jsxs(r,{renderId:"render-aa9f3d73",as:"div",children:[e.jsx(r,{className:"text-gray-400 text-sm mb-1",renderId:"render-b27a4bb4",as:"div",children:"Joueur"}),e.jsxs(r,{className:"text-white font-semibold flex items-center gap-2",renderId:"render-a369f71b",as:"div",children:[s.avatar_url?e.jsx(r,{src:$(s.avatar_url,s.username),alt:s.username,className:"w-8 h-8 rounded-full border-2 border-purple-400",onError:a=>a.target.style.display="none",renderId:"render-14ba168f",as:"img"}):e.jsx(U,{className:"w-6 h-6 text-purple-400"}),e.jsxs(r,{renderId:"render-f45b01c7",as:"div",children:[e.jsx(r,{renderId:"render-f9c5b360",as:"div",children:s.username}),e.jsxs(r,{className:"text-xs text-gray-400",renderId:"render-8d1d1b2b",as:"div",children:["Niv. ",s.level||1," • ",s.points||0," pts"]})]})]})]}),e.jsxs(r,{renderId:"render-6585528a",as:"div",children:[e.jsx(r,{className:"text-gray-400 text-sm mb-1",renderId:"render-c622d8b6",as:"div",children:"Jeu"}),e.jsxs(r,{className:"text-white font-semibold flex items-center gap-2",renderId:"render-09045c92",as:"div",children:[e.jsx(k,{className:"w-4 h-4 text-purple-400"}),s.game_name]})]})]})]}),e.jsxs(r,{className:"flex gap-2",renderId:"render-d3c9a35e",as:"div",children:[s.status==="ready"&&e.jsxs(r,{onClick:()=>u(s.id,"start"),disabled:x===`${s.id}-start`,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 flex items-center gap-2",renderId:"render-24b1ba8d",as:"button",children:[e.jsx(b,{className:"w-4 h-4"}),"Démarrer"]}),s.status==="active"&&e.jsxs(e.Fragment,{children:[e.jsxs(r,{onClick:()=>u(s.id,"pause"),disabled:x===`${s.id}-pause`,className:"px-4 py-2 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 disabled:opacity-50 flex items-center gap-2",renderId:"render-df2807a5",as:"button",children:[e.jsx(g,{className:"w-4 h-4"}),"Pause"]}),e.jsxs(r,{onClick:()=>u(s.id,"terminate"),disabled:x===`${s.id}-terminate`,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 flex items-center gap-2",renderId:"render-79e562fa",as:"button",children:[e.jsx(K,{className:"w-4 h-4"}),"Terminer"]})]}),s.status==="paused"&&e.jsxs(r,{onClick:()=>u(s.id,"resume"),disabled:x===`${s.id}-resume`,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 flex items-center gap-2",renderId:"render-93c511d8",as:"button",children:[e.jsx(b,{className:"w-4 h-4"}),"Reprendre"]})]})]}),e.jsxs(r,{className:"mt-4",renderId:"render-59b705fd",as:"div",children:[e.jsxs(r,{className:"flex justify-between text-sm mb-2",renderId:"render-ffdd0250",as:"div",children:[e.jsx(r,{className:"text-gray-400",renderId:"render-64286aa4",as:"span",children:"Temps restant"}),e.jsxs(r,{className:"text-white font-semibold",renderId:"render-c6b26f6b",as:"span",children:[N(s.remaining_minutes)," / ",N(s.total_minutes)]})]}),e.jsx(r,{className:"w-full bg-gray-700 rounded-full h-3 overflow-hidden",renderId:"render-f3888f02",as:"div",children:e.jsx(r,{className:`h-full transition-all duration-1000 ${C(s.remaining_minutes,s.total_minutes)}`,style:{width:`${s.remaining_minutes/s.total_minutes*100}%`},renderId:"render-fb9df818",as:"div"})}),e.jsxs(r,{className:"flex items-center gap-4 mt-3 text-sm text-gray-400",renderId:"render-e099b6aa",as:"div",children:[e.jsxs(r,{renderId:"render-c61f71d8",as:"span",children:["Démarré: ",new Date(s.started_at||s.ready_at).toLocaleString("fr-FR")]}),s.pause_count>0&&e.jsxs(r,{renderId:"render-683ec36a",as:"span",children:["Pauses: ",s.pause_count]})]})]})]},s.id))})]})]})}if(typeof window<"u"){const n={NEXT_PUBLIC_API_BASE:"https://votre-domaine.infinityfreeapp.com/api",NEXT_PUBLIC_KKIAPAY_PUBLIC_KEY:"072b361d25546db0aee3d69bf07b15331c51e39f",NEXT_PUBLIC_KKIAPAY_SANDBOX:"0"};globalThis.process??={};const i=globalThis.process.env??{};globalThis.process.env=new Proxy(Object.assign({},n,i),{get(d,l){return l in d?d[l]:void 0},has(){return!0}})}const xe=T(function(i){return e.jsx(S,{children:e.jsx(O,{...i})})});export{xe as default};
