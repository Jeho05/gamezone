import{u as T,r as c,w as S}from"./react-vendor-BXH1ZKCn.js";import{j as e}from"./ui-vendor-CptTL0WJ.js";import{R as E}from"./layout-CA9ilw8C.js";import{C as r}from"./PolymorphicComponent-CmmJTj6d.js";import{N as B,C as x}from"./Navigation-C_UvFhfu.js";import{A as f}from"./apiBase-uKT1-15E.js";import{t as g}from"./index-DeIfEMOZ.js";import{A as R}from"./arrow-left-DgQssQru.js";import{R as k}from"./refresh-cw-BpUP_ghM.js";import{F as L}from"./filter-BlspYazV.js";import{G as U}from"./gamepad-2-BnShYRR0.js";import{C as j}from"./clock-BTYTED3i.js";import{S as F}from"./users-uhOgvxGK.js";import{C as N}from"./circle-alert-BXr9mOHk.js";import{C as I}from"./circle-x-CzvvR37n.js";import{C as p}from"./circle-check-big-BJ9Fwu26.js";import{T as X}from"./timer-BY6tV2TF.js";import"./gamepad-D9JnDti4.js";import"./createLucideIcon-BCGXG0XW.js";import"./sparkles-BFQn3fMP.js";import"./trophy-CUmIdvP5.js";import"./x-BQPNjVqT.js";if(typeof window<"u"){const n={NEXT_PUBLIC_API_BASE:"https://votre-domaine.infinityfreeapp.com/api",NEXT_PUBLIC_KKIAPAY_PUBLIC_KEY:"072b361d25546db0aee3d69bf07b15331c51e39f",NEXT_PUBLIC_KKIAPAY_SANDBOX:"0"};globalThis.process??={};const l=globalThis.process.env??{};globalThis.process.env=new Proxy(Object.assign({},n,l),{get(i,t){return t in i?i[t]:void 0},has(){return!0}})}function K(){const n=T(),[l,i]=c.useState([]),[t,v]=c.useState({}),[y,b]=c.useState(!0),[o,w]=c.useState(""),_=[{value:"",label:"Toutes",color:"purple"},{value:"pending_payment",label:"En attente",color:"yellow"},{value:"paid",label:"Payées",color:"green"},{value:"completed",label:"Terminées",color:"blue"},{value:"cancelled",label:"Annulées",color:"red"}];c.useEffect(()=>{h()},[o]);const h=async()=>{try{b(!0);const s=o?`${f}/shop/my_reservations.php?status=${o}`:`${f}/shop/my_reservations.php`,a=await fetch(s,{credentials:"include"});if(a.status===401){g.error("Session expirée. Veuillez vous reconnecter."),n("/auth/login");return}const d=await a.json();d.reservations&&(i(d.reservations),v(d.stats||{}))}catch(s){console.error(s),g.error("Erreur lors du chargement des réservations")}finally{b(!1)}},C=s=>{const a={pending_payment:{label:"En attente de paiement",color:"bg-yellow-600",icon:N},paid:{label:"Payée",color:"bg-green-600",icon:p},cancelled:{label:"Annulée",color:"bg-red-600",icon:I},completed:{label:"Terminée",color:"bg-blue-600",icon:p},no_show:{label:"Non présenté",color:"bg-gray-600",icon:I}},d=a[s]||a.pending_payment,m=d.icon;return e.jsxs(r,{className:`inline-flex items-center gap-1 px-3 py-1 rounded-full text-white text-sm font-bold ${d.color}`,renderId:"render-413e5a22",as:"span",children:[e.jsx(m,{className:"w-4 h-4"}),d.label]})},P=s=>{const a=Date.now(),d=new Date(s.scheduled_start).getTime(),m=new Date(s.scheduled_end).getTime();if(s.status==="cancelled"||s.status==="no_show")return null;if(a<d){const u=Math.floor((d-a)/36e5),A=Math.floor((d-a)/(1e3*60))%60;return e.jsxs(r,{className:"flex items-center gap-2 text-cyan-400 text-sm",renderId:"render-7797fcb6",as:"div",children:[e.jsx(X,{className:"w-4 h-4"}),e.jsxs(r,{renderId:"render-87101573",as:"span",children:["Dans ",u>0?`${u}h `:"",A,"min"]})]})}return a>=d&&a<=m?e.jsxs(r,{className:"flex items-center gap-2 text-green-400 text-sm font-bold animate-pulse",renderId:"render-8d0c46e6",as:"div",children:[e.jsx(j,{className:"w-4 h-4"}),e.jsx(r,{renderId:"render-e7b550e7",as:"span",children:"EN COURS"})]}):e.jsxs(r,{className:"flex items-center gap-2 text-gray-400 text-sm",renderId:"render-980e5a4d",as:"div",children:[e.jsx(p,{className:"w-4 h-4"}),e.jsx(r,{renderId:"render-0d2dd3b4",as:"span",children:"Terminée"})]})};return e.jsxs(r,{className:"min-h-screen bg-gradient-to-br from-gray-900 via-purple-900 to-violet-900",renderId:"render-2908be66",as:"div",children:[e.jsx(B,{userType:"player"}),e.jsx(r,{className:"lg:pl-64",renderId:"render-95e7598b",as:"div",children:e.jsxs(r,{className:"container mx-auto px-4 py-8",renderId:"render-0d14f4a7",as:"div",children:[e.jsxs(r,{className:"mb-8",renderId:"render-911c43b4",as:"div",children:[e.jsxs(r,{onClick:()=>n("/player/shop"),className:"flex items-center gap-2 text-gray-300 hover:text-white mb-4 transition-colors",renderId:"render-20a92b0c",as:"button",children:[e.jsx(R,{className:"w-5 h-5"}),"Retour à la boutique"]}),e.jsxs(r,{className:"flex items-center justify-between",renderId:"render-9785c7eb",as:"div",children:[e.jsxs(r,{renderId:"render-92d47670",as:"div",children:[e.jsxs(r,{className:"text-4xl font-bold text-white mb-2 flex items-center gap-3",renderId:"render-ed2c5d98",as:"h1",children:[e.jsx(x,{className:"w-10 h-10 text-cyan-400"}),"Mes Réservations"]}),e.jsx(r,{className:"text-gray-300",renderId:"render-f20eaba9",as:"p",children:"Gérez vos sessions de jeu réservées"})]}),e.jsxs(r,{onClick:h,className:"flex items-center gap-2 px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg transition-colors",renderId:"render-b656e12a",as:"button",children:[e.jsx(k,{className:"w-5 h-5"}),"Actualiser"]})]})]}),e.jsxs(r,{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",renderId:"render-fb7b9d13",as:"div",children:[e.jsxs(r,{className:"bg-white/10 backdrop-blur-md border border-white/20 rounded-xl p-4",renderId:"render-46f57c27",as:"div",children:[e.jsx(r,{className:"text-3xl font-bold text-white mb-1",renderId:"render-e20d760c",as:"div",children:t.total||0}),e.jsx(r,{className:"text-sm text-gray-300",renderId:"render-bc2094fb",as:"div",children:"Total"})]}),e.jsxs(r,{className:"bg-green-900/30 border border-green-600 rounded-xl p-4",renderId:"render-44d4d142",as:"div",children:[e.jsx(r,{className:"text-3xl font-bold text-green-400 mb-1",renderId:"render-7bbd9997",as:"div",children:t.paid||0}),e.jsx(r,{className:"text-sm text-gray-300",renderId:"render-51f8e16d",as:"div",children:"Payées"})]}),e.jsxs(r,{className:"bg-yellow-900/30 border border-yellow-600 rounded-xl p-4",renderId:"render-84ab24db",as:"div",children:[e.jsx(r,{className:"text-3xl font-bold text-yellow-400 mb-1",renderId:"render-45b8f1d2",as:"div",children:t.pending_payment||0}),e.jsx(r,{className:"text-sm text-gray-300",renderId:"render-abd8aabb",as:"div",children:"En attente"})]}),e.jsxs(r,{className:"bg-blue-900/30 border border-blue-600 rounded-xl p-4",renderId:"render-99be4219",as:"div",children:[e.jsx(r,{className:"text-3xl font-bold text-blue-400 mb-1",renderId:"render-63753a21",as:"div",children:t.completed||0}),e.jsx(r,{className:"text-sm text-gray-300",renderId:"render-eb89cd31",as:"div",children:"Terminées"})]})]}),e.jsxs(r,{className:"mb-8",renderId:"render-6d696a55",as:"div",children:[e.jsxs(r,{className:"flex items-center gap-2 mb-4",renderId:"render-68dd69e9",as:"div",children:[e.jsx(L,{className:"w-5 h-5 text-gray-300"}),e.jsx(r,{className:"text-white font-bold",renderId:"render-e45143b5",as:"span",children:"Filtrer par statut"})]}),e.jsx(r,{className:"flex flex-wrap gap-3",renderId:"render-083319a7",as:"div",children:_.map(s=>e.jsx(r,{onClick:()=>w(s.value),className:`px-4 py-2 rounded-lg font-semibold transition-all ${o===s.value?`bg-${s.color}-600 text-white`:"bg-white/10 text-gray-300 hover:bg-white/20"}`,renderId:"render-98d71a7c",as:"button",children:s.label},s.value))})]}),y?e.jsxs(r,{className:"text-center py-20",renderId:"render-505c3983",as:"div",children:[e.jsx(r,{className:"inline-block animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-purple-500 mb-4",renderId:"render-4442c6d8",as:"div"}),e.jsx(r,{className:"text-xl text-white",renderId:"render-f9f02632",as:"p",children:"Chargement..."})]}):l.length===0?e.jsxs(r,{className:"text-center py-20",renderId:"render-4fc8b3af",as:"div",children:[e.jsx(x,{className:"w-32 h-32 text-gray-600 mx-auto mb-6 opacity-50"}),e.jsx(r,{className:"text-2xl font-bold text-white mb-2",renderId:"render-0be8d30b",as:"p",children:"Aucune réservation"}),e.jsx(r,{className:"text-gray-400 mb-6",renderId:"render-7a8aeeee",as:"p",children:"Vous n'avez pas encore de réservations"}),e.jsx(r,{onClick:()=>n("/player/shop"),className:"px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg font-bold hover:from-purple-700 hover:to-pink-700 transition-all",renderId:"render-2a91baea",as:"button",children:"Parcourir les jeux"})]}):e.jsx(r,{className:"space-y-4",renderId:"render-7f93abcb",as:"div",children:l.map(s=>e.jsx(r,{className:"bg-gray-800/50 backdrop-blur-md border border-white/10 rounded-xl p-6 hover:border-purple-500/50 transition-all",renderId:"render-97466bcb",as:"div",children:e.jsxs(r,{className:"flex flex-col lg:flex-row gap-6",renderId:"render-a7ed76b1",as:"div",children:[e.jsx(r,{className:"w-full lg:w-48 h-32 lg:h-auto rounded-lg overflow-hidden flex-shrink-0",renderId:"render-8472a406",as:"div",children:e.jsx(r,{src:s.game_image||`https://via.placeholder.com/300x200?text=${encodeURIComponent(s.game_name)}`,alt:s.game_name,className:"w-full h-full object-cover",onError:a=>{a.target.src="https://via.placeholder.com/300x200?text=Game"},renderId:"render-9ed466d3",as:"img"})}),e.jsxs(r,{className:"flex-1 space-y-3",renderId:"render-04704655",as:"div",children:[e.jsxs(r,{className:"flex items-start justify-between",renderId:"render-f55727a6",as:"div",children:[e.jsxs(r,{renderId:"render-116f708a",as:"div",children:[e.jsxs(r,{className:"text-2xl font-bold text-white mb-1 flex items-center gap-2",renderId:"render-9cdd05bc",as:"h3",children:[e.jsx(U,{className:"w-6 h-6 text-purple-400"}),s.game_name]}),C(s.status)]}),P(s)]}),e.jsxs(r,{className:"grid grid-cols-1 md:grid-cols-2 gap-4",renderId:"render-33a17c10",as:"div",children:[e.jsxs(r,{className:"flex items-center gap-2 text-gray-300",renderId:"render-e647836c",as:"div",children:[e.jsx(x,{className:"w-5 h-5 text-cyan-400"}),e.jsxs(r,{renderId:"render-055bf4a6",as:"div",children:[e.jsx(r,{className:"text-sm text-gray-400",renderId:"render-954f6d33",as:"div",children:"Date de début"}),e.jsx(r,{className:"font-bold text-white",renderId:"render-df586746",as:"div",children:new Date(s.scheduled_start).toLocaleString("fr-FR",{dateStyle:"medium",timeStyle:"short"})})]})]}),e.jsxs(r,{className:"flex items-center gap-2 text-gray-300",renderId:"render-3c77e24f",as:"div",children:[e.jsx(j,{className:"w-5 h-5 text-green-400"}),e.jsxs(r,{renderId:"render-c578aea0",as:"div",children:[e.jsx(r,{className:"text-sm text-gray-400",renderId:"render-1a83ebae",as:"div",children:"Durée"}),e.jsxs(r,{className:"font-bold text-white",renderId:"render-89c2d78e",as:"div",children:[s.duration_minutes," minutes"]})]})]}),e.jsxs(r,{className:"flex items-center gap-2 text-gray-300",renderId:"render-6ff9c93f",as:"div",children:[e.jsx(F,{className:"w-5 h-5 text-yellow-400"}),e.jsxs(r,{renderId:"render-45bd4281",as:"div",children:[e.jsx(r,{className:"text-sm text-gray-400",renderId:"render-23a07d9a",as:"div",children:"Prix total"}),e.jsxs(r,{className:"font-bold text-green-400",renderId:"render-8d96cfe4",as:"div",children:[parseFloat(s.total_price||s.base_price).toFixed(0)," XOF"]})]})]}),s.reservation_fee>0&&e.jsxs(r,{className:"flex items-center gap-2 text-gray-300",renderId:"render-4a1d0587",as:"div",children:[e.jsx(N,{className:"w-5 h-5 text-cyan-400"}),e.jsxs(r,{renderId:"render-5c5471e8",as:"div",children:[e.jsx(r,{className:"text-sm text-gray-400",renderId:"render-8dd86a22",as:"div",children:"Frais de réservation"}),e.jsxs(r,{className:"font-bold text-cyan-400",renderId:"render-30ab9bdd",as:"div",children:[parseFloat(s.reservation_fee).toFixed(0)," XOF"]})]})]})]}),s.notes&&e.jsx(r,{className:"bg-blue-900/20 border border-blue-600/50 rounded-lg p-3",renderId:"render-4345d76b",as:"div",children:e.jsx(r,{className:"text-sm text-gray-300",renderId:"render-8c928f46",as:"p",children:s.notes})}),s.payment_status&&e.jsxs(r,{className:"text-sm text-gray-400",renderId:"render-35233f57",as:"div",children:["Paiement: ",e.jsx(r,{className:"text-white font-semibold capitalize",renderId:"render-9168afc8",as:"span",children:s.payment_status})]})]})]})},s.id))})]})})]})}if(typeof window<"u"){const n={NEXT_PUBLIC_API_BASE:"https://votre-domaine.infinityfreeapp.com/api",NEXT_PUBLIC_KKIAPAY_PUBLIC_KEY:"072b361d25546db0aee3d69bf07b15331c51e39f",NEXT_PUBLIC_KKIAPAY_SANDBOX:"0"};globalThis.process??={};const l=globalThis.process.env??{};globalThis.process.env=new Proxy(Object.assign({},n,l),{get(i,t){return t in i?i[t]:void 0},has(){return!0}})}const ie=S(function(l){return e.jsx(E,{children:e.jsx(K,{...l})})});export{ie as default};
